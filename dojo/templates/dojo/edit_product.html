{% extends "base.html" %}
{% load static %}
{% block add_css %}

    <link rel="stylesheet" href="{% static "easymde/dist/easymde.min.css" %}">
{% endblock %}
{% block add_styles %}
.chosen-container {
    width: 70% !important;
    }
    .editor-toolbar, .editor-statusbar, .editor-preview-side, .CodeMirror {
    width: 70% !important;
    }
    .chosen-container.chosen-container-multi {
    width: 70% !important;
    }
{% endblock %}
{% block content %}
    <h3> Edit {{ product.name }}</h3>
    <form class="form-horizontal" method="post">{% csrf_token %}
        {% include "dojo/form_fields.html" with form=form %}
        {%  if jform %}
                <h4> JIRA </h4>
                <hr>
                {% include "dojo/form_fields.html" with form=jform %}
            {% endif %}
        {%  if gform %}
            <h4> Github </h4>
            <hr>
            {% include "dojo/form_fields.html" with form=gform %}
        {% endif %}
        {% if sonarqube_form %}
         <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
          <div class="panel panel-default">
            <div class="panel-heading" role="tab" id="headingOne">
              <h4 class="panel-title">
                <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                  SonarQube API
                </a>
              </h4>
            </div>
            <div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
              <div class="panel-body">
                {% include "dojo/form_fields.html" with form=sonarqube_form %}
              </div>
            </div>
          </div>
        </div>
        {% endif %}
        <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
                <input class="btn btn-primary" type="submit" value="Submit"/>
            </div>
        </div>
    </form>
{% endblock %}
{% block postscript %}
    <script type="application/javascript" src="{% static "easymde/dist/easymde.min.js" %}"></script>
    <script type="application/javascript">
        $(function () {
          $("textarea").each(function (index, elem) {

              if (elem.hasAttribute("required")) {
                  elem.removeAttribute("required");
                  elem.id = "req"
              }

              var mde = new EasyMDE({
                  spellChecker: false,
                  element: elem,
                  autofocus: false,
                  forceSync: true,
                  toolbar: ["bold", "italic", "heading", "|",
                        "quote", "unordered-list", "ordered-list", "|",
                        "link", "image", "|",
                        "table", "horizontal-rule", "code", "|",
                        "guide"
                    ]
              });
              mde.render();
            });
            $('#id_product_manager').chosen({'placeholder_text_single': 'Select a Product Manager...'});
            $('#id_team_manager').chosen({'placeholder_text_single': 'Select a Team Manager...'});
            $('#id_technical_contact').chosen({'placeholder_text_single': 'Select a Technical Contact...'});
            $('#id_authorized_users').chosen({'placeholder_text_multiple': 'Select some users...'});

        });
    </script>
{% endblock %}
