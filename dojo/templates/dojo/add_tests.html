{% extends "base.html" %}
{% load static from staticfiles %}

{% block add_styles %}
.chosen-container {
    width: 70% !important;
}
{% endblock %}

{% block content %}

    <h3> Add Tests</h3>
    <form class="form-horizontal" action="{% url 'add_tests' eid%}" method="post">{% csrf_token %}
        {% include "dojo/form_fields.html" with form=form %}
        {% include "dojo/form_fields.html" with form=cred_form %}
        <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
                <input class="btn btn-primary" type="submit" name="_Add Another Test" value="Add Another Test"/>
                <input class="btn btn-primary" type="submit" name="_Add Findings" value="Add Findings"/>
                <input class="btn btn-primary" type="submit" name="_Finished" value="Finished"/>
            </div>
        </div>
    </form>
{% endblock %}
{% block postscript %}
    <script type="application/javascript">
        $(function () {
            $('#id_tags').chosen({
                'placeholder_text_multiple': 'Select or add some tags...',
                'no_results_text': "Tag not found, press TAB key to add.",
            });

            $(".search-field").find("input").on("keydown", function (evt) {
                var stroke;
                stroke = (_ref = evt.which) != null ? _ref : evt.keyCode;
                if (stroke == 9) { // 9 = tab key
                    var o = new Option($(this).val(), $(this).val(), true, true);
			        $("#id_tags").append(o);
                    $('#id_tags').trigger('chosen:updated');
                    $('#id_tags').focus();
                    return false;
                }
            });
        });
    </script>
{% endblock %}
