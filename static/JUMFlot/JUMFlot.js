(function($){function between(v,limit1,limit2){if(limit2>limit1)return v>=limit1&&v<=limit2;else return v>=limit2&&v<=limit1}function getMinMax(data){var mn,mx,df;mn=Number.POSITIVE_INFINITY;mx=Number.NEGATIVE_INFINITY;for(var i=0;i<data.length;i++){mn=Math.min(mn,data[i][1]);mx=Math.max(mx,data[i][1])}df=mx-mn;return{min:mn,max:mx,diff:df}}function showHover(event,pos,item,showAlways,createText){var txt;if(item){var data=item.series.data[item.dataIndex];if(createText)txt=createText(data);else{txt=
"X:"+data[0]+"<br>Y:"+data[1];if(data.length>2)for(var i=2;i<data.length;i++)txt+="<br>"+data[i]}showTooltip(pos.pageX,pos.pageY,txt)}else if(showAlways===true){txt=pos.x1+" / "+pos.y1;showTooltip(pos.pageX,pos.pageY,txt)}else $("#FLOTtooltip").remove()}function showTooltip(x,y,contents){$("#FLOTtooltip").remove();$('<div id="FLOTtooltip">'+contents+"</div>").css({position:"absolute",display:"none",top:y+5,left:x+5,border:"1px solid #fdd",padding:"2px","background-color":"#fee",opacity:0.8}).appendTo("body").fadeIn(200)}
function docuObjectToTemplate(areas,name){var objStart,objEnd,obj,msg,takedef,j,z;objStart='z = {"docu":""\n';objStart+=","+name+':{"docu":""\n';objEnd="\n}\n}";obj=eval(objStart+objEnd);for(var i=0;i<areas.length;i++){msg=objStart;var names=areas[i].name.split(".");msg+=",";for(j=0;j<names.length-1;j++)msg+=names[j]+':{"docu":"",';msg+=names[names.length-1]+":";if(areas[i].takeDefault)takedef=areas[i].takeDefault;else takedef=false;msg+=docuSubtree(areas[i].tree,takedef)+"}";for(j=0;j<areas[i].name.split(".").length-
1;j++)msg+="}";msg+=objEnd;$.extend(true,obj,eval(msg))}return obj;function docuSubtree(obj,takedef){var msg="";if(typeof obj==="object"){msg='{"docu":""';for(var i in obj)if(typeof obj[i]==="object"){if($.isNumeric(i))msg+='\n,"'+i+'":';else msg+="\n,"+i+":";msg+=docuSubtree(obj[i],takedef);msg+="}"}else if(typeof obj[i]==="function"){var fn=obj[i].toSource();fn=fn.substr(8,fn.indexOf(")")-7);if(takedef===true)msg+='\n,"'+i+'":{"docu":""}';else msg+='\n,"'+i+'":{"docu":"",defVal:"'+fn+'"}'}else if(takedef===
true)msg+='\n,"'+i+'":{"docu":"","defVal":"'+obj[i]+'"}';else msg+='\n,"'+i+'":{"docu":""}'}else msg+='{"docu":""';return msg}}function extendDocuObject(n,o,p){var d=n[p].data;for(var i in d)if(i!=="0"&&i!=="docu"&&i!=="defVal")delete d[i];if(o)extendTree(n,o);$.extend(true,n,o);function extendTree(n,o){for(var i in n)if(typeof n[i]==="object"){if(o[i])extendTree(n[i],o[i])}else if(i==="docu"){if(o.docu)if(o.docu.length>0)n.docu=o.docu}else if(i==="defVal")if(o.defVal)if(o.defVal.length>0)n.defVal=
o.defVal}}function docuObjectToEdit(obj,name){var msg='<form name="editObject">';msg+='<input type="button" value="Create json" onclick="$.plot.JUMExample.createJSON();">';msg+=extendTree(obj,name);function extendTree(obj,prev){msg="<ul>";msg+="<li>"+prev.substr(prev.lastIndexOf(".")+1);if(obj.defVal)msg+=" <i>default:"+obj.defVal+"</i>";msg+="<br>";msg+=getInput(obj.docu,prev)+"<br>";for(var i in obj)if(typeof obj[i]==="object")msg+=extendTree(obj[i],prev+"."+i);msg+="</ul>";return msg}function getInput(txt,
prev){var s;s="$.plot.JUMExample.setDocu('"+prev+".docu"+"',this.value);";return'<textarea cols="50" rows="3" onblur="'+s+'" >'+txt+"</textarea>"}msg+="</form>";return msg}function docuObjectToHTML(obj,maxdepth,depth){if(!maxdepth)maxdepth=8;var msg="";if(!depth){depth=0;msg+='<ul id="sitemap" class="treeview">\n'}else msg+="<ul>\n";if(typeof obj==="object")for(var i in obj)if(typeof obj[i]==="object"){if($.isNumeric(i))msg+="<b>["+i+"]</b>";else msg+="<li><b>"+i+"</b>";if(obj[i].docu)msg+="&nbsp;<dfn>"+
obj[i].docu+"</dfn>";if(obj[i].defVal)if(obj[i].defVal!=="none")msg+="&nbsp;(<code>"+obj[i].defVal+"</code>)";msg+="</li>\n";if(maxdepth>depth)msg+=docuObjectToHTML(obj[i],maxdepth,depth+1)}else if(i!=="docu"&&i!=="defVal")msg+="<li>"+obj[i]+"</li>\n";msg+="</ul>\n";return msg}function objectToDocumentation(obj,docuObjName,maxdepth,showfunction,depth,prevname){if(!maxdepth)maxdepth=6;if(!showfunction)showfunction=false;return docuSubtree(obj,-1,"");function docuSubtree(obj,depth,prevname){var msg=
"";if(depth<0){depth=0;msg+='<ul id="sitemap" class="treeview">\n'}else msg+="<ul>\n";if(typeof obj==="object")for(var i in obj)if(typeof obj[i]==="object"){msg+="<li><b>"+getHelpUrl(prevname,i)+"</b>&nbsp;<i>"+getTypeOf(obj[i])+"</i></li>\n";if(maxdepth>depth)msg+=docuSubtree(obj[i],depth+1,prevname+"."+i)}else if(typeof obj[i]==="function")if(showfunction===true)msg+="<li>"+getHelpUrl(prevname,i)+"&nbsp;"+obj[i].toString()+"</li>\n";else msg+="<li>"+getHelpUrl(prevname,i)+"&nbsp;<i>"+getTypeOf(obj[i])+
"</i></li>\n";else msg+="<li>"+getHelpUrl(prevname,i)+"="+getString(obj[i])+"&nbsp;<i>"+getTypeOf(obj[i])+"</i></li>\n";else msg+="<li>"+obj+"&nbsp;<i>"+getTypeOf(obj)+"</i></li>\n";msg+="</ul>\n";return msg}function getHelpUrl(prevname,actname){return'<span class="jumflothelp" docuobj="'+docuObjName+'" prevname="'+prevname+'" actname="'+actname+'">'+actname+"</span>"}function getString(x){var y=x;if(typeof y==="string"){y=y.replace(/</g,"&lt;");y=y.replace(/>/g,"&gt;")}return y}function getTypeOf(x){var r;
r=typeof x;if($.isArray(x))r+=" Array";return r}}function objectStringifyHTML(obj){var r=JSON.stringify(obj);r=r.replace(/{/g,'{<blockquote style="padding:1px; margin-top:1px; margin-bottom:1px">');r=r.replace(/}/g,"</blockquote>}");r=r.replace(/\[/g,'[<blockquote style="padding:1px; margin-top:1px; margin-bottom:1px">');r=r.replace(/\]/g,"</blockquote>]");return r}function getAPIHelp(docuObjName,prevName,actName){var val="",nm=docuObjName+prevName+"."+actName;try{if(eval(nm+".docu"))val=eval(nm+
".docu");if(eval(nm+".Default"))val+="Default:"+eval(nm+".Default")}catch(err){val+="nothing found, please see flot API"}return nm+"<hr>"+val}function createQuartile(data,index,indexName){var q0=[],q1=[],q2=[],q3=[],q4=[],v=[],i1,i2,i3,i4,p;i1=(0.25*data.length).toFixed(0);i2=(0.5*data.length).toFixed(0);i3=(0.75*data.length).toFixed(0);i4=data.length-1;for(var j=0;j<data[0].length;j++){p=[];for(var i=0;i<data.length;i++)p.push(data[i][j]);p.sort(function(a,b){return a-b});q1.push([j,p[i1]]);q2.push([j,
p[i2]]);q3.push([j,p[i3]]);q4.push([j,p[i4]]);q0.push([j,p[0]]);v.push([j,data[index][j]])}var r=[{data:q4},{data:q3},{data:q2},{data:q1},{data:q0,color:"#ffffff"},{label:indexName,points:{show:true},lines:{fill:null,steps:false},data:v}];return r}function createPercentile(data,index,indexName,percentiles){var percentile=[],val=[],indexes=[],p,j,i;if(percentiles.length){indexes.push([0]);percentile.push([]);for(j=0;j<percentiles.length;j++){indexes.push(parseInt(data.length*percentiles[j],0));percentile.push([])}indexes.push(data.length-
1)}else{for(j=0;j<percentiles;j++){indexes.push(parseInt(data.length/percentiles*j,0));percentile.push([])}indexes.push(data.length-1)}percentile.push([]);for(j=0;j<data[0].length;j++){p=[];for(i=0;i<data.length;i++)p.push(data[i][j]);p.sort(function(a,b){return a-b});for(i=0;i<percentile.length;i++)percentile[i].push([j,p[indexes[i]]]);val.push([j,data[index][j]])}var r=[];for(j=percentile.length-1;j>0;j--)r.push({data:percentile[j]});r.push({data:percentile[0],color:"#ffffff"});r.push({label:indexName,
points:{show:true},lines:{fill:null,steps:false},data:val});return r}function createSimiliarity(data1,data2,mode){var r=[];var d1=normalize(data1);var d2=normalize(data2);var d;for(var i=0;i<d1.length;i++){switch(mode){case "diff":d=d1[i][1]-d2[i][1];break;case "abs":d=Math.abs(d1[i][1]-d2[i][1]);break;default:d=0}r.push([d1[i][0],d])}return r}function createWaterfall(data,colors){var d1=[],d2=[],d3=[],d4=[],p=0,mn=Number.POSITIVE_INFINITY,i;var dx=data;for(i=0;i<dx.length;i++){if(dx[i][2])if(typeof dx[i][1]===
"undefined")d1.push([i,p]);else{d1.push([i,dx[i][1]]);p=dx[i][1]}else if(dx[i][1]>0){d4.push([i,-dx[i][1]]);p=p+dx[i][1];d2.push([i,p]);d3.push([i,0])}else{d3.push([i,-dx[i][1]]);p=p+dx[i][1];d2.push([i,p])}mn=Math.min(mn,p)}var ticks=[];for(i=0;i<data.length;i++)ticks.push([i,data[i][0]]);var dr={data:[{data:d1,color:colors.fixed},{data:d2,bars:{show:false},lines:{show:false}},{data:d3,color:colors.negative},{data:d4,color:colors.positive}],ticks:ticks,yaxismin:mn};return dr}function avg(data,range){var r=
[],rd=[],i1,s;for(var i=0;i<data.length;i++){if(i<range)i1=0;else i1=i-range+1;rd=[];rd.push(data[i][0]);for(var k=1;k<data[i].length;k++){s=0;for(var j=i1;j<=i;j++)s+=data[j][k];rd.push(s/(i-i1+1))}r.push(rd)}return r}function max(data,range){var r=[],rd=[],i1,mx;for(var i=0;i<data.length;i++){if(i<range)i1=0;else i1=i-range+1;rd=[];rd.push(data[i][0]);for(var k=1;k<data[i].length;k++){mx=-Number.MAX_VALUE;for(var j=i1;j<=i;j++)if(data[j][k]>mx)mx=data[j][k];rd.push(mx)}r.push(rd)}return r}function min(data,
range){var r=[],rd=[],i1,mn;for(var i=0;i<data.length;i++){if(i<range)i1=0;else i1=i-range+1;rd=[];rd.push(data[i][0]);for(var k=1;k<data[i].length;k++){mn=Number.MAX_VALUE;for(var j=i1;j<=i;j++)if(data[j][k]<mn)mn=data[j][k];rd.push(mn)}r.push(rd)}return r}function sort(data,sortOrder,sortfnc){var d=[];for(var i=0;i<data.length;i++)d.push(data[i]);if(sortfnc)d.sort(sortfnc);else if(sortOrder==="a")d.sort(mysorta);else d.sort(mysortd);return d;function mysorta(a,b){return a[1]-b[1]}function mysortd(a,
b){return b[1]-a[1]}}function sortTicks(data,sortOrder,sortfnc){var d=sort(data,sortOrder,sortfnc);for(var i=0;i<d.length;i++)d[i][0]=i;return{data:d,ticks:getTicks(d)}}function pareto(data,otherLabel,showOthers,topN,topPercent){var d=[],othersLabel="Others",showothers=true,i,dn=[];d=sort(data,"d");if(otherLabel.length>0)othersLabel=otherLabel;showothers=showOthers;if(topN){var s;for(i=0;i<topN;i++)dn.push(d[i]);s=0;for(i=topN;i<d.length;i++)s+=d[i][1];if(showothers)dn.push([topN,s,othersLabel]);
d=dn}else if(topPercent){var datasum=0,datar=0,datao=0,j;for(i=0;i<d.length;i++)datasum+=d[i][1];datasum=datasum*topPercent/100;for(i=0;i<d.length;i++)if(datar<datasum){dn.push(d[i]);datar+=d[i][1];j=i}else datao+=d[i][1];j++;if(showothers)dn.push([j,datao,othersLabel]);d=dn}for(i=0;i<d.length;i++)d[i][0]=i;return{data:d,ticks:getTicks(d)}}function getTicks(d){var t=[];for(var i=0;i<d.length;i++)if(d[i][2])t.push([d[i][0],d[i][2]]);else t.push(d[i][0],d[i][0]);return t}function normalize(data){var minmax,
d;var r=[];minmax=getMinMax(data);for(var i=0;i<data.length;i++){d=(data[i][1]-minmax.min)/minmax.diff*100;r.push([data[i][0],d])}return r}function combineData(data,ticks){var r=[];for(var i=0;i<data.length;i++){var s=[];for(var j=0;j<data[i].length;j++){var d=[ticks[j],data[i][j]];s.push(d)}r.push(s)}return r}function createFont(placeholder){var f={style:placeholder.css("font-style"),size:Math.round(0.8*(+placeholder.css("font-size").replace("px","")||13)),variant:placeholder.css("font-variant"),
weight:placeholder.css("font-weight"),family:placeholder.css("font-family")};return f}function createColors(options,neededColors){var c,colors=[],colorPool=options.colors,colorPoolSize=colorPool.length,variation=0;for(var i=0;i<colorPoolSize;i++)colors[i]=colorPool[i];if(colorPoolSize<neededColors)for(i=colorPoolSize;i<neededColors;i++){c=$.color.parse(colorPool[i%colorPoolSize]||"#666");if(i%colorPoolSize===0&&i)if(variation>=0)if(variation<0.5)variation=-variation-0.2;else variation=0;else variation=
-variation;colors[i]=c.scale("rgb",1+variation).toString()}return colors}function getColor(colorData){var c;if(typeof colorData==="object")if(typeof colorData.dataIndex!=="undefined")if(typeof colorData.serie.data[colorData.dataIndex].color!=="undefined")c=getColorL(colorData.serie.data[colorData.dataIndex].color);else c=colorData.colors[colorData.dataIndex];else if(typeof colorData.serieIndex!=="undefined")if(typeof colorData.serie.color!=="undefined")c=getColorL(colorData.serie.color);else c=colorData.colors[colorData.serieIndex];
else if(typeof colorData.color!=="undefined")c=getColorL(colorData.color);else c="darkgreen";else c=getColorL(colorData);return c;function getColorL(color){var c;if(typeof color==="object")if(typeof color.image!=="undefined")c=colorData.ctx.createPattern(color.image,color.repeat);else{if(colorData.radius)c=colorData.ctx.createRadialGradient(colorData.left,colorData.top,0,colorData.left,colorData.top,colorData.radius);else c=colorData.ctx.createLinearGradient(0,0,colorData.width,colorData.height);
for(var i=0;i<color.colors.length;i++){var cl=color.colors[i];if(typeof cl!=="string"){var co=$.color.parse(colorData.defaultColor);if(color.brightness!==null)cl=co.scale("rgb",color.brightness);if(color.opacity!==null)co*=color.opacity;cl=co.toString()}c.addColorStop(i/(color.colors.length-1),cl)}}else if(typeof color==="string")c=color;else c=colorData.colors[color];return c}}function loadImages(images,maxWait,callback){var tmp,loadedImg={};tmp="$.when(";for(var i=0;i<images.length;i++){if(i>0)tmp+=
",";tmp+='loadImage("'+images[i].path+'","'+images[i].name+'","'+images[i].type+'")'}tmp+=").then(function(){finish();},function(){finish();});";eval(tmp);function loadImage(path,name,type){var dfd=$.Deferred(),t,url;url=path+name+"."+type;t=setInterval(function(){clearInterval(t);dfd.reject()},maxWait);$("<img />").attr("src",url).load(loaded).error(errorFound);return dfd.promise();function loaded(){loadedImg[name]=this;dfd.resolve()}function errorFound(e,f,g){console.log(url,e);loadedImg[name]=
null;dfd.reject()}}function finish(){callback(loadedImg)}}function getCanvases(placeholder){var canvases={background:$("#placeholder").children(".flot-background"),base:$("#placeholder").children(".flot-base"),overlay:$("#placeholder").children(".flot-overlay")};return canvases}function drawLines(plot,lines){var offset,series,ctx;offset=plot.getPlotOffset();series=plot.getData();ctx=plot.getCanvas().getContext("2d");ctx.translate(offset.left,offset.top);for(var i=0;i<lines.length;i++){var from=series[lines[i].from.seriesIndex],
to=series[lines[i].to.seriesIndex];var fl=lines[i].from,tl=lines[i].to;if(!fl.dataFieldX)fl.dataFieldX=0;if(!fl.dataFieldY)fl.dataFieldY=1;if(!tl.dataFieldX)tl.dataFieldX=0;if(!tl.dataFieldY)tl.dataFieldY=1;var xf,yf,xt,yt;xf=from.xaxis.p2c(from.data[fl.dataIndex][fl.dataFieldX]);yf=from.yaxis.p2c(from.data[fl.dataIndex][fl.dataFieldY]);xt=from.xaxis.p2c(to.data[tl.dataIndex][tl.dataFieldX]);yt=from.yaxis.p2c(to.data[tl.dataIndex][tl.dataFieldY]);ctx.beginPath();ctx.strokeStyle="red";ctx.lineWidth=
5;ctx.moveTo(xf,yf);ctx.lineTo(xt,yt);ctx.stroke()}}$.plot.JUMlib={};$.plot.JUMlib.library={};$.plot.JUMlib.library.between=between;$.plot.JUMlib.library.getMinMax=getMinMax;$.plot.JUMlib.library.showHover=showHover;$.plot.JUMlib.library.showTooltip=showTooltip;$.plot.JUMlib.docu={};$.plot.JUMlib.docu.docuObjectToTemplate=docuObjectToTemplate;$.plot.JUMlib.docu.extendDocuObject=extendDocuObject;$.plot.JUMlib.docu.docuObjectToEdit=docuObjectToEdit;$.plot.JUMlib.docu.docuObjectToHTML=docuObjectToHTML;
$.plot.JUMlib.docu.objectToDocumentation=objectToDocumentation;$.plot.JUMlib.docu.objectStringifyHTML=objectStringifyHTML;$.plot.JUMlib.docu.getAPIHelp=getAPIHelp;$.plot.JUMlib.prepareData={};$.plot.JUMlib.prepareData.createQuartile=createQuartile;$.plot.JUMlib.prepareData.createPercentile=createPercentile;$.plot.JUMlib.prepareData.createSimiliarity=createSimiliarity;$.plot.JUMlib.prepareData.createWaterfall=createWaterfall;$.plot.JUMlib.prepareData.avg=avg;$.plot.JUMlib.prepareData.max=max;$.plot.JUMlib.prepareData.min=
min;$.plot.JUMlib.prepareData.sort=sort;$.plot.JUMlib.prepareData.sortTicks=sortTicks;$.plot.JUMlib.prepareData.pareto=pareto;$.plot.JUMlib.prepareData.normalize=normalize;$.plot.JUMlib.prepareData.combineData=combineData;$.plot.JUMlib.data={};$.plot.JUMlib.data.createFont=createFont;$.plot.JUMlib.data.createColors=createColors;$.plot.JUMlib.data.getColor=getColor;$.plot.JUMlib.data.loadImages=loadImages;$.plot.JUMlib.data.getCanvases=getCanvases;$.plot.JUMlib.drawing={};$.plot.JUMlib.drawing.drawLines=
drawLines})(jQuery);(function($){var options={series:{editable:null,editMode:"xy",justEditing:null,justMoving:null,autoSet:false,nearBy:{distance:6,findItem:findNearbyItemDefault,findMode:"circle",drawEdit:drawEditDefault,drawHover:drawHoverDefault}},grid:{editable:false}};function init(plot){var opt=null,evtHolder=null,plotOffset=null,placeHolder=null;plot.hooks.bindEvents.push(bindEvents);function bindEvents(plot,eventHolder){opt=plot.getOptions();evtHolder=eventHolder;plotOffset=plot.getPlotOffset();placeHolder=plot.getPlaceholder();
if(opt.grid.editable||opt.grid.clickable||opt.grid.hoverable){evtHolder.mousedown(onMouseDown);evtHolder.mouseup(onMouseUp);evtHolder.mousemove(onMouseMove);evtHolder.click(onMouseClick)}}function onMouseClick(e){var positem=getMousePosition(e);if(positem[1]){var s=positem[1].series;if(s.points.show===false&&(!s.lines.show||s.lines.show===false)&&s.bars.show===false)placeHolder.trigger("plotclick",positem)}}function onMouseDown(e){if(opt.grid.editable){var positem=getMousePosition(e);if(positem[1]){var v=
null;if(positem[1].series.editable){if(positem[1].dataIndex.length)v=positem[1].series.data[positem[1].dataIndex[0]];else v=positem[1].series.data[positem[1].dataIndex];switch(positem[1].series.editMode){case "x":positem[0].y=v[1];positem[0].y1=v[1];break;case "y":positem[0].x=v[0];positem[0].x1=v[0];break}opt.series.justEditing=positem}placeHolder.trigger("plotdown",positem)}placeHolder.css("cursor","auto")}}function onMouseUp(e){if(opt.series.justEditing){placeHolder.trigger("plotup",opt.series.justEditing);
placeHolder.trigger("datadrop",opt.series.justEditing);var s=opt.series.justEditing[1].series;if(s.autoEdit===true){var p=opt.series.justEditing[0];s.data[s.dataIndex]=[p.x1,p.y1]}}opt.series.justEditing=null;plot.triggerRedrawOverlay()}function onMouseMove(e){var i;var positem=getMousePosition(e);if(opt.series.justEditing){i=opt.series.justEditing[1].seriesIndex;switch(plot.getData()[i].editMode){case "none":break;case "x":opt.series.justEditing[0].x=positem[0].x;opt.series.justEditing[0].x1=positem[0].x1;
opt.series.justEditing[0].pageX=positem[0].pageX;break;case "y":opt.series.justEditing[0].y=positem[0].y;opt.series.justEditing[0].y1=positem[0].y1;opt.series.justEditing[0].pageY=positem[0].pageY;break;case "v":if(positem[1]){opt.series.justEditing[0]=positem[0];opt.series.justEditing[0].value=positem[1].value}break;case "xy":opt.series.justEditing[0]=positem[0];break;default:opt.series.justEditing[0]=positem[0]}}else if(positem[1]){opt.series.justMoving=positem;i=positem[1].seriesIndex;switch(positem[1].series.editMode){case "x":placeHolder.css("cursor",
"col-resize");break;case "y":placeHolder.css("cursor","row-resize");break;default:placeHolder.css("cursor","crosshair")}var s=positem[1].series;if(s.points.show===false&&(!s.lines.show||s.lines.show===false)&&s.bars.show===false)placeHolder.trigger("plothover",positem)}else{placeHolder.css("cursor","auto");opt.series.justMoving=null}plot.triggerRedrawOverlay()}function getMousePosition(e){var pos,item=null,offset=evtHolder.offset();var canvasX=e.pageX-offset.left-plotOffset.left,canvasY=e.pageY-offset.top-
plotOffset.top;pos=plot.c2p({left:canvasX,top:canvasY});pos.pageX=e.pageX;pos.pageY=e.pageY;item=findNearbyItem(canvasX,canvasY);if(item){item.pageX=parseInt(item.series.xaxis.p2c(item.datapoint[0])+offset.left+plot.getPlotOffset().left,0);item.pageY=parseInt(item.series.yaxis.p2c(item.datapoint[1])+offset.top+plot.getPlotOffset().top,0)}return[pos,item]}function findNearbyItem(mouseX,mouseY){var item=null,v,i,j,ps;for(i=0;i<plot.getData().length;i++){var s=plot.getData()[i];if(s.nearBy.findItem!==
null)item=s.nearBy.findItem(mouseX,mouseY,i,s);if(item)break}if(item){i=item[0],j=item[1],ps=plot.getData()[i].datapoints.pointsize;if(item.length>2)v=item[2];var dp=plot.getData()[i].datapoints.points.slice(j*ps,(j+1)*ps);var r={datapoint:dp,dataIndex:j,series:plot.getData()[i],seriesIndex:i,value:v};return r}return null}plot.hooks.drawOverlay.push(drawOverlay);function drawOverlay(plot,octx){var serie,x,y;octx.save();octx.clearRect(0,0,plot.getPlaceholder().width,plot.getPlaceholder().height);octx.translate(plot.getPlotOffset().left,
plot.getPlotOffset().top);if(opt.series.justEditing){serie=plot.getData()[opt.series.justEditing[1].seriesIndex],x=opt.series.justEditing[0].x1,y=opt.series.justEditing[0].y1;if(serie.nearBy.drawEdit)serie.nearBy.drawEdit(octx,x,y,serie)}else if(opt.series.justMoving){serie=plot.getData()[opt.series.justMoving[1].seriesIndex];if(serie.nearBy.drawHover)serie.nearBy.drawHover(octx,serie,opt.series.justMoving[1].dataIndex)}octx.restore()}}function findNearbyItemDefault(mouseX,mouseY,i,serie){var maxDistance=
serie.nearBy.distance,smallestDistance=maxDistance*maxDistance+1,item=null,j,x,y,dx,dy,dist;var axisx=serie.xaxis,axisy=serie.yaxis,points=serie.datapoints.points,ps=serie.datapoints.pointsize,mx=axisx.c2p(mouseX),my=axisy.c2p(mouseY),maxx=maxDistance/axisx.scale,maxy=maxDistance/axisy.scale;if(axisx.options.inverseTransform)maxx=Number.MAX_VALUE;if(axisy.options.inverseTransform)maxy=Number.MAX_VALUE;for(j=0;j<points.length;j+=ps){x=points[j];y=points[j+1];if(x===null)continue;switch(serie.nearBy.findMode){case "circle":if(x-
mx>maxx||x-mx<-maxx)continue;if(y-my>maxy||y-my<-maxy)continue;dx=Math.abs(axisx.p2c(x)-mouseX),dy=Math.abs(axisy.p2c(y)-mouseY);dist=dx*dx+dy*dy;if(dist<smallestDistance){smallestDistance=dist;item=[i,j/ps]}break;case "vertical":if(between(mouseX,axisx.p2c(x),axisx.p2c(x+serie.nearBy.width))){dist=Math.abs(axisy.p2c(y)-mouseY);if(dist<serie.nearBy.distance)item=[i,j/ps]}break;case "horizontal":var axisymin=axisy.datamin<0?Math.max(0,axisy.datamin):Math.min(0,axisy.datamin);if(between(mouseY,axisy.p2c(y),
axisy.p2c(axisymin))){dist=Math.abs(axisx.p2c(x)-mouseX);if(dist<=serie.nearBy.distance)item=[i,j/ps]}break;default:}}return item}function drawHoverDefault(octx,serie,dataIndex){}function drawEditDefault(octx,x,y,serie){var axisx=serie.xaxis,axisy=serie.yaxis;if(x<axisx.min||x>axisx.max||y<axisy.min||y>axisy.max)return;switch(serie.nearBy.findMode){case "circle":var pointRadius=serie.points.radius+serie.points.lineWidth/2;octx.lineWidth=pointRadius;octx.strokeStyle=$.color.parse(serie.color).scale("a",
0.5).toString();var radius=1.5*pointRadius;x=axisx.p2c(x),y=axisy.p2c(y);octx.beginPath();octx.arc(x,y,radius,0,2*Math.PI,false);octx.fillStyle="#ff8080";octx.fill();octx.lineWidth=2;octx.moveTo(x,y-radius);octx.lineTo(x,y+radius);octx.moveTo(x-radius,y);octx.lineTo(x+radius,y);octx.closePath();octx.stroke();break;case "vertical":octx.lineWidth=2;octx.strokeStyle=$.color.parse(serie.color).scale("a",0.5).toString();octx.beginPath();octx.moveTo(axisx.p2c(x),axisy.p2c(y));octx.lineTo(axisx.p2c(x+serie.nearBy.width),
axisy.p2c(y));octx.closePath();octx.stroke();break;case "horizontal":octx.lineWidth=4;octx.strokeStyle=$.color.parse(serie.color).scale("a",0.5).toString();octx.beginPath();octx.moveTo(axisx.p2c(x),axisy.p2c(y));var axisymin=axisy.datamin<0?Math.max(0,axisy.datamin):Math.min(0,axisy.datamin);octx.lineTo(axisx.p2c(x),axisy.p2c(axisymin));octx.closePath();octx.stroke();break}}$.plot.plugins.push({init:init,options:options,name:"mouse",version:"0.2"});var between=$.plot.JUMlib.library.between})(jQuery);(function($){var pluginName="bandwidth",pluginVersion="0.5";var options={series:{bandwidth:{active:false,show:false,fill:true,lineWidth:"4px",highlight:{opacity:0.5},drawBandwidth:drawBandwidthDefault,debug:{active:false,createDocuTemplate:null}},editMode:"y",nearBy:{distance:6,findItem:null,findMode:"circle",drawHover:null}}};function drawBandwidthDefault(ctx,bandwidth,x,y1,y2,color){ctx.beginPath();ctx.strokeStyle=color;ctx.lineWidth=bandwidth.barWidth;ctx.lineCap="round";ctx.moveTo(x,y1);ctx.lineTo(x,
y2);ctx.stroke()}function init(plot){var offset=null,opt=null,series=null;plot.hooks.processOptions.push(processOptions);function processOptions(plot,options){if(options.series.bandwidth.active){options.series.lines.show=false;opt=options;plot.hooks.processRawData.push(processRawData);plot.hooks.drawSeries.push(drawSeries);if(opt.series.bandwidth.debug.active===true)opt.series.bandwidth.debug.createDocuTemplate=createDocuTemplate}}function processRawData(plot,s,data,datapoints){if(s.bandwidth.show===
true){s.nearBy.findItem=findNearbyItemBandwidth;s.nearBy.drawHover=drawHoverBandwidth}}function createDocuTemplate(){var z,frm;z=$.plot.JUMlib.docu.docuObjectToTemplate([{name:"data",tree:series.data},{name:"options.series.bandwidth",tree:options.series.bandwidth,takeDefault:true},{name:"options.series.bandwidth",tree:opt.series.bandwidth},{name:"options.series.editMode",tree:options.series.editMode,takeDefault:true},{name:"options.series.editMode",tree:opt.series.editMode},{name:"options.series.nearBy",
tree:options.series.nearBy,takeDefault:true},{name:"options.series.nearBy",tree:opt.series.nearBy}],pluginName);$.plot.JUMlib.docu.extendDocuObject(z,bandwidth_docu,pluginName);frm=$.plot.JUMlib.docu.docuObjectToEdit(z,"");return{data:z,form:frm}}function drawSeries(plot,ctx,serie){if(serie.bandwidth.show){if(opt.series.bandwidth.debug.active===true)series=serie;if(typeof serie.bandwidth.lineWidth==="string"){serie.bandwidth.barWidth=parseInt(serie.bandwidth.lineWidth,0);serie.nearBy.width=serie.bandwidth.barWidth}else{var dp=
serie.xaxis.p2c(serie.xaxis.min+serie.bandwidth.lineWidth)-serie.xaxis.p2c(serie.xaxis.min);serie.bandwidth.barWidth=dp;serie.nearBy.width=serie.bandwidth.lineWidth}offset=plot.getPlotOffset();for(var j=0;j<serie.data.length;j++)drawBandwidth(ctx,serie,j,serie.color)}}function drawBandwidth(ctx,serie,j,color){var x,y1,y2,data;if(j.length)data=serie.data[j[0]];else data=serie.data[j];x=offset.left+serie.xaxis.p2c(data[0]);y1=offset.top+serie.yaxis.p2c(data[1]);y2=offset.top+serie.yaxis.p2c(data[2]);
serie.bandwidth.drawBandwidth(ctx,serie.bandwidth,x,y1,y2,color)}function findNearbyItemBandwidth(mouseX,mouseY,i,serie){var item=null;if(opt.series.justEditing){if(opt.series.justEditing[1].seriesIndex===i)item=findNearbyItemEdit(mouseX,mouseY,i,serie)}else if(opt.grid.editable)item=findNearbyItemForEdit(mouseX,mouseY,i,serie);else item=findNearbyItem(mouseX,mouseY,i,serie);return item;function findNearbyItemEdit(mouseX,mouseY,i,serie){var item=null;var j=opt.series.justEditing[1].dataIndex;if(j.length)item=
[i,j];else item=[i,j];return item}function findNearbyItemForEdit(mouseX,mouseY,i,serie){var item=null;if(serie.bandwidth.show)for(var j=0;j<serie.data.length;j++){var x,y1,y2,dataitem;dataitem=serie.data[j];x=serie.xaxis.p2c(dataitem[0])-serie.bandwidth.barWidth/2;y1=serie.yaxis.p2c(dataitem[1])-serie.bandwidth.barWidth/2;y2=serie.yaxis.p2c(dataitem[2])-serie.bandwidth.barWidth/2;if(between(mouseX,x,x+serie.bandwidth.barWidth)){if(between(mouseY,y1,y2)){item=[i,j];serie.editMode="x";serie.nearBy.findMode=
"horizontal"}if(between(mouseY,y1,y1+serie.bandwidth.barWidth)){item=[i,[j,1]];serie.editMode="y";serie.nearBy.findMode="vertical"}if(between(mouseY,y2,y2+serie.bandwidth.barWidth)){item=[i,[j,2]];serie.editMode="y";serie.nearBy.findMode="vertical"}}}return item}function findNearbyItem(mouseX,mouseY,i,serie){var item=null;if(serie.bandwidth.show)for(var j=0;j<serie.data.length;j++){var x,y1,y2,dataitem;dataitem=serie.data[j];x=serie.xaxis.p2c(dataitem[0])-serie.bandwidth.barWidth/2;y1=serie.yaxis.p2c(dataitem[1]);
y2=serie.yaxis.p2c(dataitem[2]);if(between(mouseX,x,x+serie.bandwidth.barWidth))if(between(mouseY,y1,y2))item=[i,j]}return item}}function drawHoverBandwidth(octx,serie,dataIndex){octx.save();octx.translate(-offset.left,-offset.top);var c="rgba(255,255,255,"+serie.bandwidth.highlight.opacity+")";drawBandwidth(octx,serie,dataIndex,c);octx.restore()}}var between=$.plot.JUMlib.library.between;$.plot.plugins.push({init:init,options:options,name:pluginName,version:pluginVersion})})(jQuery);(function($){var pluginName="bubbles",pluginVersion="0.3";var options={series:{bubbles:{active:false,show:false,fill:true,lineWidth:2,highlight:{opacity:0.5},drawbubble:drawbubbleDefault,bubblelabel:{show:false,fillStyle:"black"},debug:{active:false,createDocuTemplate:null}},editMode:"xy",nearBy:{distance:6,findMode:"circle"}}};function drawbubbleDefault(ctx,serie,x,y,v,r,c,overlay){ctx.fillStyle=c;ctx.strokeStyle=c;ctx.lineWidth=serie.bubbles.lineWidth;ctx.beginPath();ctx.arc(x,y,r,0,Math.PI*2,true);
ctx.closePath();if(serie.bubbles.fill)ctx.fill();else ctx.stroke();if(serie.bubbles.bubblelabel.show)drawbubbleLabel(ctx,serie,x,y,v);function drawbubbleLabel(ctx,serie,x,y,v){var xtext,ytext,vsize,f;ctx.fillStyle=serie.bubbles.bubblelabel.fillStyle;f=serie.xaxis.font;vsize=ctx.measureText(v);xtext=x-vsize.width/2;ytext=y+4;ctx.fillText(v,xtext,ytext)}}function init(plot){var offset=null,opt=null,series=null;plot.hooks.processOptions.push(processOptions);function processOptions(plot,options){if(options.series.bubbles.active){opt=
options;plot.hooks.processRawData.push(processRawData);plot.hooks.drawSeries.push(drawSeries);if(opt.series.bubbles.debug.active===true)opt.series.bubbles.debug.createDocuTemplate=createDocuTemplate}}function processRawData(plot,s,data,datapoints){if(s.bubbles.show==true);}function createDocuTemplate(){var z,frm;z=$.plot.JUMlib.docu.docuObjectToTemplate([{name:"data",tree:series.data},{name:"options.series.bubbles",tree:options.series.bubbles,takeDefault:true},{name:"options.series.bubbles",tree:opt.series.bubbles},
{name:"options.series.editMode",tree:options.series.editMode,takeDefault:true},{name:"options.series.editMode",tree:opt.series.editMode},{name:"options.series.nearBy",tree:options.series.nearBy,takeDefault:true},{name:"options.series.nearBy",tree:opt.series.nearBy}],pluginName);$.plot.JUMlib.docu.extendDocuObject(z,bubbles_docu,pluginName);frm=$.plot.JUMlib.docu.docuObjectToEdit(z,"");return{data:z,form:frm}}function drawSeries(plot,ctx,serie){if(serie.bubbles.show){if(opt.series.bubbles.debug.active===
true)series=serie;offset=plot.getPlotOffset();for(var j=0;j<serie.data.length;j++)drawbubble(ctx,serie,serie.data[j],serie.color)}}function drawbubble(ctx,serie,data,c,overlay){var x,y,r,v;x=offset.left+serie.xaxis.p2c(data[0]);y=offset.top+serie.yaxis.p2c(data[1]);v=data[2];r=parseInt(serie.yaxis.scale*data[2]/2,0);serie.bubbles.drawbubble(ctx,serie,x,y,v,r,c,overlay)}function findNearbyItemBubbles(mouseX,mouseY,i,serie){var item=null;if(opt.series.justEditing){if(opt.series.justEditing[1].seriesIndex===
i)item=findNearbyItemEdit(mouseX,mouseY,i,serie)}else if(opt.grid.editable)item=findNearbyItemForEdit(mouseX,mouseY,i,serie);else item=findNearbyItem(mouseX,mouseY,i,serie);return item;function findNearbyItemEdit(mouseX,mouseY,i,serie){}}function findNearbyItemBubblesOld(mouseX,mouseY,i,serie){var item=null;if(!serie.justEditing)item=findNearbyItem(mouseX,mouseY,i,serie);return item}function findNearbyItemOld(mouseX,mouseY,i,serie){var item=null;if(serie.bubbles.show){for(var j=0;j<serie.data.length;j++){var dataitem=
serie.data[j];var dx=Math.abs(axes.xaxis.p2c(dataitem[0])-mouseX),dy=Math.abs(axes.yaxis.p2c(dataitem[1])-mouseY),dist=Math.sqrt(dx*dx+dy*dy);if(dist<=dataitem[2])item=[i,j]}return item}}function drawHighlightBubblesOld(octx,serie,point,dataIndex,edit){octx.save();octx.translate(-offset.left,-offset.top);var c="rgba(255, 255, 255, "+serie.bubbles.highlight.opacity+")";drawbubble(octx,serie,serie.data[dataIndex],c,true);octx.restore()}}$.plot.plugins.push({init:init,options:options,name:pluginName,
version:pluginVersion})})(jQuery);(function($){var pluginName="candlestick",pluginVersion="0.3";var options={series:{candlestick:{active:false,show:false,rangeWidth:4,rangeColor:"rgb(0,128,128)",upColor:"rgb(255,0,0)",downColor:"rgb(0,255,0)",neutralColor:"rgb(0,0,0)",lineWidth:"8px",highlight:{opacity:0.5},drawCandlestick:drawCandlestickDefault,debug:{active:false,createDocuTemplate:null}}}};function drawCandlestickDefault(ctx,serie,data,hover){if(hover===true){var c="rgba(255,255,255,"+serie.candlestick.highlight.opacity+")";drawHover(ctx,
serie,data,c)}else{drawRange(ctx,serie,data);drawBody(ctx,serie,data)}function drawRange(ctx,serie,data){var x,y1,y2;x=serie.xaxis.p2c(data[0]);y1=serie.yaxis.p2c(data[3]);y2=serie.yaxis.p2c(data[4]);ctx.lineWidth=serie.candlestick.rangeWidth;ctx.beginPath();ctx.strokeStyle=serie.candlestick.rangeColor;ctx.moveTo(x,y1);ctx.lineTo(x,y2);ctx.stroke()}function drawBody(ctx,serie,data){var x,y1,y2,c;x=serie.xaxis.p2c(data[0]-serie.candlestick.barWidth/2);y1=serie.yaxis.p2c(data[1]);y2=serie.yaxis.p2c(data[2]);
if(data[1]>data[2])c=serie.candlestick.upColor;else c=serie.candlestick.downColor;if(data[1]==data[2]){c=serie.candlestick.neutralColor;y2=y1+2}ctx.beginPath();ctx.strokeStyle=c;ctx.lineWidth=serie.candlestick.barWidth;ctx.moveTo(x,y1);ctx.lineTo(x,y2);ctx.stroke()}function drawHover(ctx,serie,data,c){var x,y1,y2;x=serie.xaxis.p2c(data[0]-serie.candlestick.barWidth/2);y1=serie.yaxis.p2c(data[3]);y2=serie.yaxis.p2c(data[4]);ctx.beginPath();ctx.strokeStyle=c;ctx.lineWidth=serie.candlestick.barWidth;
ctx.moveTo(x,y1);ctx.lineTo(x,y2);ctx.stroke()}}function init(plot){var offset=null,opt=null,series=null;plot.hooks.processOptions.push(processOptions);function processOptions(plot,options){if(options.series.candlestick.active){options.legend.show=false;opt=options;plot.hooks.processRawData.push(processRawData);plot.hooks.drawSeries.push(drawSeries);if(opt.series.candlestick.debug.active===true)opt.series.candlestick.debug.createDocuTemplate=createDocuTemplate}}function processRawData(plot,s,data,
datapoints){if(s.candlestick.show===true){s.nearBy.findItem=findNearbyItemCandlestick;s.nearBy.drawHover=drawHoverCandlestick}}function createDocuTemplate(){var z,frm;z=$.plot.JUMlib.docu.docuObjectToTemplate([{name:"data",tree:series.data},{name:"options.series.candlestick",tree:options.series.candlestick,takeDefault:true},{name:"options.series.candlestick",tree:opt.series.candlestick},{name:"options.series.editMode",tree:opt.series.editMode},{name:"options.series.nearBy",tree:opt.series.nearBy}],
pluginName);$.plot.JUMlib.docu.extendDocuObject(z,candlestick_docu,pluginName);frm=$.plot.JUMlib.docu.docuObjectToEdit(z,"");return{data:z,form:frm}}function drawSeries(plot,ctx,serie){if(serie.candlestick.show===true){if(opt.series.candlestick.debug.active===true)series=serie;if(typeof serie.candlestick.lineWidth==="string"){serie.candlestick.barWidth=parseInt(serie.candlestick.lineWidth,0);serie.nearBy.width=serie.candlestick.barWidth}else{var dp=serie.xaxis.p2c(serie.xaxis.min+serie.candlestick.lineWidth)-
serie.xaxis.p2c(serie.xaxis.min);serie.candlestick.barWidth=dp;serie.nearBy.width=serie.candlestick.lineWidth}offset=plot.getPlotOffset();ctx.save();ctx.translate(offset.left,offset.top);for(var i=0;i<serie.data.length;i++)serie.candlestick.drawCandlestick(ctx,serie,serie.data[i],false);ctx.restore()}}function findNearbyItemCandlestick(mouseX,mouseY,i,serie){var item=null;if(serie.candlestick.show===true)if(opt.series.justEditing){if(opt.series.justEditing[1].seriesIndex===i)item=findNearbyItemEdit(mouseX,
mouseY,i,serie)}else if(opt.grid.editable)item=findNearbyItemForEdit(mouseX,mouseY,i,serie);else item=findNearbyItem(mouseX,mouseY,i,serie);return item;function findNearbyItemEdit(mouseX,mouseY,i,serie){var item=null;var j=opt.series.justEditing[1].dataIndex;if(j.length)item=[i,j];else item=[i,j];return item}function findNearbyItemForEdit(mouseX,mouseY,i,serie){var item=null;if(serie.candlestick.show===true)for(var j=0;j<serie.data.length;j++){var x,y1,y2,y3,y4,dataitem;dataitem=serie.data[j];x=serie.xaxis.p2c(dataitem[0])-
serie.candlestick.barWidth/2;y1=serie.yaxis.p2c(dataitem[1])-serie.candlestick.rangeWidth/2;y2=serie.yaxis.p2c(dataitem[2])-serie.candlestick.rangeWidth/2;y3=serie.yaxis.p2c(dataitem[3])-serie.candlestick.rangeWidth/2;y4=serie.yaxis.p2c(dataitem[4])-serie.candlestick.rangeWidth/2;if(between(mouseX,x,x+serie.candlestick.barWidth)){if(between(mouseY,y3,y4)){item=[i,j];serie.editMode="x";serie.nearBy.findMode="horizontal"}if(between(mouseY,y1,y1+serie.candlestick.rangeWidth)){item=[i,[j,1]];serie.editMode=
"y";serie.nearBy.findMode="vertical"}if(between(mouseY,y2,y2+serie.candlestick.rangeWidth)){item=[i,[j,2]];serie.editMode="y";serie.nearBy.findMode="vertical"}if(between(mouseY,y3,y3+serie.candlestick.rangeWidth)){item=[i,[j,3]];serie.editMode="y";serie.nearBy.findMode="vertical"}if(between(mouseY,y4,y4+serie.candlestick.rangeWidth)){item=[i,[j,4]];serie.editMode="y";serie.nearBy.findMode="vertical"}}}return item}function findNearbyItem(mouseX,mouseY,i,serie){var item=null;for(var j=0;j<serie.data.length;j++){var x,
y1,y2,dataitem;dataitem=serie.data[j];x=serie.xaxis.p2c(dataitem[0])-serie.candlestick.barWidth/2;y1=serie.yaxis.p2c(dataitem[3]);y2=serie.yaxis.p2c(dataitem[4]);if(between(mouseX,x,x+serie.candlestick.barWidth))if(between(mouseY,y1,y2))item=[i,j]}return item}}function drawHoverCandlestick(octx,serie,dataIndex){var data;octx.save();if(dataIndex.length)data=serie.data[dataIndex[0]];else data=serie.data[dataIndex];serie.candlestick.drawCandlestick(octx,serie,data,true);octx.restore()}}function createCandlestick(data){var min=
[],max=[];for(var i=0;i<data.data.length;i++){min.push([data.data[i][0],data.data[i][3]]);max.push([data.data[i][0],data.data[i][4]])}var r=[data,{label:"Max",data:max,lines:{show:false},candlestick:{show:false},nearBy:{findItem:null}},{label:"Min",data:min,lines:{show:false},candlestick:{show:false},nearBy:{findItem:null}}];return r}var between=$.plot.JUMlib.library.between;$.plot.candlestick={};$.plot.candlestick.createCandlestick=createCandlestick;$.plot.plugins.push({init:init,options:options,
name:pluginName,version:pluginVersion})})(jQuery);(function($){var pluginName="gantt",pluginVersion="0.3";var options={series:{gantt:{active:false,show:false,connectSteps:{show:false,lineWidth:2,color:"rgb(0,0,0)"},barHeight:0.6,highlight:{opacity:0.5},drawstep:drawStepDefault,debug:{active:false,createDocuTemplate:null}}},editMode:"y",nearBy:{distance:6,findItem:null,findMode:"circle",drawHover:null}};function drawStepDefault(ctx,series,data,x,y,x2,color,isHighlight){if(isHighlight===false){ctx.beginPath();ctx.lineWidth=series.gantt.barheight;ctx.strokeStyle=
"rgb(0,0,0)";ctx.moveTo(x,y);ctx.lineTo(x2,y);ctx.stroke()}ctx.beginPath();ctx.strokeStyle=color;ctx.lineWidth=series.gantt.barheight-2;ctx.lineCap="butt";ctx.moveTo(x+1,y);ctx.lineTo(x2-1,y);ctx.stroke()}function init(plot){var offset=null,opt=null,series=null,canvas,target,axes,data;plot.hooks.processOptions.push(processOptions);function processOptions(plot,options){if(options.series.gantt.active){options.series.lines.show=false;opt=options;plot.hooks.processRawData.push(processRawData);plot.hooks.draw.push(draw);
if(opt.series.gantt.debug.active===true)opt.series.gantt.debug.createDocuTemplate=createDocuTemplate}}function createDocuTemplate(){var z,frm;z=$.plot.JUMlib.docu.docuObjectToTemplate([{name:"data",tree:series.data},{name:"options.series.gantt",tree:options.series.gantt,takeDefault:true},{name:"options.series.gantt",tree:opt.series.gantt},{name:"options.series.editMode",tree:opt.series.editMode},{name:"options.series.nearBy",tree:opt.series.nearBy}],pluginName);$.plot.JUMlib.docu.extendDocuObject(z,
gantt_docu,pluginName);frm=$.plot.JUMlib.docu.docuObjectToEdit(z,"");return{data:z,form:frm}}function processRawData(plot,s,data,datapoints){if(s.gantt.show===true){s.nearBy.findItem=findNearbyItemGantt;s.nearBy.drawHover=drawHoverGantt}}function draw(plot,ctx){var serie;canvas=plot.getCanvas();target=$(canvas).parent();axes=plot.getAxes();offset=plot.getPlotOffset();data=plot.getData();for(var i=0;i<data.length;i++){serie=data[i];serie.gantt.barheight=axes.yaxis.p2c(1)/(axes.yaxis.max-axes.yaxis.min)*
serie.gantt.barHeight;if(serie.gantt.show){series=serie;for(var j=0;j<serie.data.length;j++)drawData(ctx,serie,serie.data[j],serie.color,false);if(serie.gantt.connectSteps.show)drawConnections(ctx,serie)}}}function drawData(ctx,series,data,color,isHighlight){var x,y,x2;x=offset.left+axes.xaxis.p2c(data[0]);x=Math.min(Math.max(offset.left,x),offset.left+plot.width());y=offset.top+axes.yaxis.p2c(data[1]);x2=offset.left+axes.xaxis.p2c(data[2]);x2=Math.min(Math.max(x2,offset.left),offset.left+plot.width());
if(x2>offset.left||x>offset.left)if(x<offset.left+plot.width()||x2<offset.left+plot.width())if(data.length===4)drawStepDefault(ctx,series,data,x,y,x2,color,isHighlight);else series.gantt.drawstep(ctx,series,data,x,y,x2,color,isHighlight)}function drawConnections(ctx,series){for(var i=0;i<series.data.length;i++)for(var j=0;j<series.data.length;j++)if(series.data[i][2]==series.data[j][0]){var x=offset.left+axes.xaxis.p2c(series.data[i][2]),y=offset.top+axes.yaxis.p2c(series.data[i][1]),y2=offset.top+
axes.yaxis.p2c(series.data[j][1]);drawConnection(ctx,x,y,y2,series.gantt.connectSteps.lineWidth,series.gantt.connectSteps.color)}}function drawConnection(ctx,x,y,y2,lineWidth,color){ctx.beginPath();ctx.lineWidth=lineWidth;ctx.strokeStyle=color;ctx.moveTo(x,y);ctx.lineTo(x,y2);ctx.stroke()}function findNearbyItemGantt(mouseX,mouseY,i,serie){var item=null;if(opt.series.justEditing){if(opt.series.justEditing[1].seriesIndex===i)item=findNearbyItemEdit(mouseX,mouseY,i,serie)}else if(opt.grid.editable)item=
findNearbyItemForEdit(mouseX,mouseY,i,serie);else item=findNearbyItem(mouseX,mouseY,i,serie);return item;function findNearbyItem(mouseX,mouseY,i,serie){var item=null;if(serie.gantt.show)for(var j=0;j<serie.data.length;j++){var dataitem=serie.data[j];var dx=serie.xaxis.p2c(dataitem[0]),dx2=serie.xaxis.p2c(dataitem[2]),dy=Math.abs(serie.yaxis.p2c(dataitem[1])-mouseY);if(dy<=serie.gantt.barheight/2)if(between(mouseX,dx,dx2))item=[i,j]}return item}function findNearbyItemForEdit(mouseX,mouseY,i,serie){var item=
null;if(serie.gantt.show)for(var j=0;j<serie.data.length;j++){var dataitem=serie.data[j];var dx=serie.xaxis.p2c(dataitem[0]),dx2=serie.xaxis.p2c(dataitem[2]),dy=Math.abs(serie.yaxis.p2c(dataitem[1])-mouseY);if(dy<=serie.gantt.barheight/2){if(between(mouseX,dx,dx2)){item=[i,j];serie.editMode="y";serie.nearBy.findMode="vertical";serie.nearBy.width=dataitem[2]-dataitem[0]}if(between(mouseX,dx,dx+serie.nearBy.distance)){item=[i,[j,1]];serie.editMode="x";serie.nearBy.findMode="horizontal"}if(between(mouseX,
dx2,dx2+serie.nearBy.distance)){item=[i,[j,2]];serie.editMode="x";serie.nearBy.findMode="horizontal"}}}return item}function findNearbyItemEdit(mouseX,mouseY,i,serie){var item=null;var j=opt.series.justEditing[1].dataIndex;var dataitem=serie.data[j];if(j.length)item=[i,j];else item=[i,j];return item}}function drawHoverGantt(octx,serie,dataIndex){var data;octx.save();octx.translate(-offset.left,-offset.top);var c="rgba(255,255,255, "+serie.gantt.highlight.opacity+")";if(dataIndex.length)data=serie.data[dataIndex[0]];
else data=serie.data[dataIndex];drawData(octx,serie,data,c,true);octx.restore()}}var between=$.plot.JUMlib.library.between;$.plot.plugins.push({init:init,options:options,name:pluginName,version:pluginVersion})})(jQuery);(function($){var pluginName="grow",pluginVersion="0.4";var options={series:{grow:{active:true,stepDelay:20,steps:100,growings:[{valueIndex:1,stepMode:"linear",stepDirection:"up"}],debug:{active:false,createDocuTemplate:null}}}};function init(plot){var done=false;var growfunc;var plt=plot;var data=null;var opt=null;var serie=null;var valueIndex;plot.hooks.bindEvents.push(processbindEvents);plot.hooks.drawSeries.push(processSeries);function createDocuTemplate(){var z,frm;z=$.plot.JUMlib.docu.docuObjectToTemplate([{name:"data",
tree:serie.data},{name:"options.series.grow",tree:options.series.grow,takeDefault:true},{name:"options.series.grow",tree:opt.series.grow},{name:"options.series.editMode",tree:options.series.editMode,takeDefault:true},{name:"options.series.editMode",tree:opt.series.editMode},{name:"options.series.nearBy",tree:options.series.nearBy,takeDefault:true},{name:"options.series.nearBy",tree:opt.series.nearBy}],pluginName);$.plot.JUMlib.docu.extendDocuObject(z,grow_docu,pluginName);frm=$.plot.JUMlib.docu.docuObjectToEdit(z,
"");return{data:z,form:frm}}function processSeries(plot,canvascontext,series){opt=plot.getOptions();valueIndex=opt.series.grow.valueIndex;if(opt.series.grow.active===true){if(opt.series.grow.debug.active===true){serie=series;opt.series.grow.debug.createDocuTemplate=createDocuTemplate}if(done===false){data=plot.getData();data.actualStep=0;data.growingIndex=0;for(var j=0;j<data.length;j++){data[j].dataOrg=clone(data[j].data);for(var i=0;i<data[j].data.length;i++)data[j].data[i][valueIndex]=0}plot.setData(data);
done=true}}}function processbindEvents(plot,eventHolder){opt=plot.getOptions();if(opt.series.grow.active===true){var d=plot.getData();for(var j=0;j<data.length;j++)opt.series.grow.steps=Math.max(opt.series.grow.steps,d[j].grow.steps);if(opt.series.grow.stepDelay===0)opt.series.grow.stepDelay++;growfunc=window.setInterval(growing,opt.series.grow.stepDelay)}}function growing(){var growing;if(data.actualStep<opt.series.grow.steps){data.actualStep++;for(var j=0;j<data.length;j++)for(var g=0;g<data[j].grow.growings.length;g++){growing=
data[j].grow.growings[g];if(typeof growing.stepMode==="function")growing.stepMode(data[j],data.actualStep,growing);else if(growing.stepMode==="linear")growLinear();else if(growing.stepMode==="maximum")growMaximum();else if(growing.stepMode==="delay")growDelay();else growNone()}plt.setData(data);plt.draw()}else window.clearInterval(growfunc);function growNone(){if(data.actualStep===1)for(var i=0;i<data[j].data.length;i++)data[j].data[i][valueIndex]=data[j].dataOrg[i][growing.valueIndex]}function growLinear(){if(data.actualStep<=
data[j].grow.steps)for(var i=0;i<data[j].data.length;i++)if(growing.stepDirection==="up")data[j].data[i][growing.valueIndex]=data[j].dataOrg[i][growing.valueIndex]/data[j].grow.steps*data.actualStep;else if(growing.stepDirection==="down")data[j].data[i][growing.valueIndex]=data[j].dataOrg[i][growing.valueIndex]+(data[j].yaxis.max-data[j].dataOrg[i][growing.valueIndex])/data[j].grow.steps*(data[j].grow.steps-data.actualStep)}function growMaximum(){if(data.actualStep<=data[j].grow.steps)for(var i=0;i<
data[j].data.length;i++)if(growing.stepDirection==="up")data[j].data[i][growing.valueIndex]=Math.min(data[j].dataOrg[i][growing.valueIndex],data[j].yaxis.max/data[j].grow.steps*data.actualStep);else if(growing.stepDirection==="down")data[j].data[i][growing.valueIndex]=Math.max(data[j].dataOrg[i][growing.valueIndex],data[j].yaxis.max/data[j].grow.steps*(data[j].grow.steps-data.actualStep))}function growDelay(){if(data.actualStep==data[j].grow.steps)for(var i=0;i<data[j].data.length;i++)data[j].data[i][growing.valueIndex]=
data[j].dataOrg[i][growing.valueIndex]}}function clone(obj){if(obj===null||typeof obj!=="object")return obj;var temp=new obj.constructor;for(var key in obj)temp[key]=clone(obj[key]);return temp}}$.plot.plugins.push({init:init,options:options,name:pluginName,version:pluginVersion})})(jQuery);(function($){var pluginName="heatmap",pluginVersion="0.3";var options={series:{heatmap:{active:true,show:false,backImage:null,radiusIn:10,radiusOut:20,visible:true,width:0,height:0,max:false,gradient:{"0.45":"rgb(0,0,255)","0.55":"rgb(0,255,255)","0.65":"rgb(0,255,0)","0.95":"yellow",1:"rgb(255,0,0)"},opacity:180,highlight:{opacity:0.5},debug:{active:false,createDocuTemplate:null}},nearBy:{distance:6,findItemDefault:null,findMode:"circle",drawHover:null}}};function init(plot){var opt=null,offset=
"7",acanvas=null,actx=null,series=null;plot.hooks.processOptions.push(processOptions);function processOptions(plot,options){if(options.series.heatmap.active){opt=plot.getOptions();plot.hooks.processRawData.push(processRawData);plot.hooks.drawBackground.push(drawBackground);plot.hooks.drawSeries.push(drawSeries);if(opt.series.heatmap.debug.active===true)opt.series.heatmap.debug.createDocuTemplate=createDocuTemplate;initColorPalette()}}function initColorPalette(){var canvas=document.createElement("canvas");
canvas.width="1";canvas.height="256";var ctx=canvas.getContext("2d"),grad=ctx.createLinearGradient(0,0,1,256),gradient=opt.series.heatmap.gradient;for(var x in gradient)grad.addColorStop(x,gradient[x]);ctx.fillStyle=grad;ctx.fillRect(0,0,1,256);opt.series.heatmap.gradient=ctx.getImageData(0,0,1,256).data;delete canvas;delete grad;delete ctx}function processRawData(plot,s,data,datapoints){if(s.heatmap.show===true){s.nearBy.findItemDefault=s.nearBy.findItem;s.nearBy.findItem=findNearbyItemHeatmap;var img=
new Image;img.src=opt.series.heatmap.backImage}}function createDocuTemplate(){var z,frm;z=$.plot.JUMlib.docu.docuObjectToTemplate([{name:"data",tree:series.data},{name:"options.series.heatmap",tree:options.series.heatmap,takeDefault:true},{name:"options.series.heatmap",tree:opt.series.heatmap},{name:"options.series.editMode",tree:options.series.editMode,takeDefault:true},{name:"options.series.editMode",tree:opt.series.editMode},{name:"options.series.nearBy",tree:options.series.nearBy,takeDefault:true},
{name:"options.series.nearBy",tree:opt.series.nearBy}],pluginName);$.plot.JUMlib.docu.extendDocuObject(z,heatmap_docu,pluginName);frm=$.plot.JUMlib.docu.docuObjectToEdit(z,"");return{data:z,form:frm}}function drawBackground(plot,ctx){var img;if(opt.series.heatmap.backImage){img=opt.series.heatmap.backImage;offset=plot.getPlotOffset();ctx.save();ctx.translate(offset.left,offset.top);ctx.drawImage(img,0,0,plot.width(),plot.height());ctx.restore()}}function drawSeries(plot,ctx,serie){if(opt.series.heatmap.debug.active===
true)series=serie;acanvas=document.createElement("canvas");acanvas.style.top="0px";acanvas.style.left="0px";acanvas.style.position="absolute";acanvas.height=ctx.canvas.height;acanvas.width=ctx.canvas.width;actx=acanvas.getContext("2d");offset=plot.getPlotOffset();for(var i=serie.data.length-1;i>=0;i--){var pt=serie.data[i];drawAlpha(ctx,actx,serie.xaxis.p2c(pt[0]),serie.yaxis.p2c(pt[1]),pt[2])}function drawAlpha(ctx,actx,x,y,count){var r1=serie.heatmap.radiusIn,r2=serie.heatmap.radiusOut,lctx=actx,
max=serie.heatmap.max,rgr=lctx.createRadialGradient(x,y,r1,x,y,r2),xb=x-r2,yb=y-r2,mul=2*r2;rgr.addColorStop(0,"rgba(0,0,0,"+(count?count/serie.heatmap.max:"0.1")+")");rgr.addColorStop(1,"rgba(0,0,0,0)");lctx.fillStyle=rgr;lctx.fillRect(xb,yb,mul,mul);colorize(ctx,actx,xb,yb,offset)}function colorize(ctx,actx,x,y,offset){var width=plot.width(),radiusOut=serie.heatmap.radiusOut,height=plot.heigth;var x2=radiusOut*2;if(x+x2>width)x=width-x2;if(x<0)x=0;if(y<0)y=0;if(y+x2>height)y=height-x2;var image=
actx.getImageData(x,y,x2,x2),imageData=image.data,length=imageData.length,xp=x+offset.left,yp=y+offset.top;var orgImage=ctx.getImageData(xp,yp,x2,x2),orgImageData=orgImage.data,palette=opt.series.heatmap.gradient,opacity=opt.series.heatmap.opacity;for(var i=3;i<length;i+=4){var alpha=imageData[i];offset=alpha*4;if(!offset)continue;orgImageData[i-3]=palette[offset];orgImageData[i-2]=palette[offset+1];orgImageData[i-1]=palette[offset+2];orgImageData[i]=alpha<opacity?alpha:opacity}orgImage.data=orgImageData;
ctx.putImageData(orgImage,xp,yp)}}function findNearbyItemHeatmap(mouseX,mouseY,i,serie){var item=null;item=serie.nearBy.findItemDefault(mouseX,mouseY,i,serie);return item}}$.plot.plugins.push({init:init,options:options,name:pluginName,version:pluginVersion})})(jQuery);(function($){var pluginName="pyramid",pluginVersion="0.2";var options={series:{pyramid:{active:false,show:false,mode:"pyramid",fill:true,debug:{active:false,createDocuTemplate:null},highlight:{opacity:0.5},label:{show:false,align:"center",font:"20px Times New Roman",fillStyle:"Black"}},nearBy:{distance:6,findItem:null,findMode:"circle",drawHover:null}}};function init(plot){var opt=null,offset=null,series=null,dataHeight=null,dataMax,centerX,canvasHeight,canvasWidth;plot.hooks.processOptions.push(processOptions);
function processOptions(plot,options){options.grid.show=false;opt=options;if(options.series.pyramid.active){plot.hooks.processRawData.push(processRawData);plot.hooks.drawSeries.push(drawSeries);if(opt.series.pyramid.debug.active===true)opt.series.pyramid.debug.createDocuTemplate=createDocuTemplate}}function processRawData(plot,s,data,datapoints){if(s.pyramid.show===true){s.nearBy.findItem=findNearbyItemPyramid;s.nearBy.drawHover=drawHoverPyramid}}function createDocuTemplate(){var z,frm;z=$.plot.JUMlib.docu.docuObjectToTemplate([{name:"data",
tree:series.data},{name:"options.series.pyramid",tree:options.series.pyramid,takeDefault:true},{name:"options.series.pyramid",tree:opt.series.pyramid},{name:"options.series.editMode",tree:options.series.editMode,takeDefault:true},{name:"options.series.editMode",tree:opt.series.editMode},{name:"options.series.nearBy",tree:options.series.nearBy,takeDefault:true},{name:"options.series.nearBy",tree:opt.series.nearBy}],pluginName);$.plot.JUMlib.docu.extendDocuObject(z,pyramid_docu,pluginName);frm=$.plot.JUMlib.docu.docuObjectToEdit(z,
"");return{data:z,form:frm}}function drawSeries(plot,ctx,serie){if(serie.pyramid.show){if(opt.series.pyramid.debug.active===true)series=serie;offset=plot.getPlotOffset();dataMax=serie.data[0].value;canvasHeight=ctx.canvas.height;canvasWidth=ctx.canvas.width;dataHeight=ctx.canvas.height/serie.data.length;centerX=ctx.canvas.width/2;for(var j=0;j<serie.data.length;j++)drawItem(ctx,serie,j,opt.colors[j])}}function drawItem(ctx,serie,j,c){var lowWidth,highWidth,lowY;lowWidth=serie.data[j].value*ctx.canvas.width/
dataMax;lowY=ctx.canvas.height-dataHeight*j;if(j+1==serie.data.length)highWidth=0;else highWidth=serie.data[j+1].value*ctx.canvas.width/dataMax;if($.isFunction(serie.pyramid.mode))serie.pyramid.mode(ctx,serie,centerX,lowY,lowWidth,dataHeight,highWidth,c);else switch(serie.pyramid.mode){case "pyramid":drawPyramid(ctx,serie,lowY,lowWidth,dataHeight,highWidth,c);break;case "slice":drawSlice(ctx,serie,lowY,lowWidth,dataHeight,highWidth,c);break;default:drawPyramid(ctx,serie,lowY,lowWidth,dataHeight,highWidth,
c)}if(serie.pyramid.label.show===true)drawLabel(ctx,serie,serie.data[j],lowY-dataHeight/2)}function drawLabel(ctx,serie,data,posY){var posX;ctx.font=serie.pyramid.label.font;ctx.fillStyle=serie.pyramid.label.fillStyle;var metrics=ctx.measureText(data.label);switch(serie.pyramid.label.align){case "center":posX=ctx.canvas.width/2-metrics.width/2;break;case "left":posX=0;break;case "right":posX=ctx.canvas.width-metrics.width;break;default:posX=ctx.canvas.width-metrics.width}ctx.fillText(data.label,posX,
posY)}function drawPyramid(ctx,serie,lowY,lowWidth,dataHeight,highWidth,c){ctx.beginPath();ctx.lineWidth=1;ctx.fillStyle=c;ctx.strokeStyle=c;ctx.moveTo(centerX-lowWidth/2,lowY);ctx.lineTo(centerX+lowWidth/2,lowY);ctx.lineTo(centerX+highWidth/2,lowY-dataHeight);ctx.lineTo(centerX-highWidth/2,lowY-dataHeight);ctx.closePath();ctx.fill()}function drawSlice(ctx,serie,lowY,lowWidth,dataHeight,highWidth,c){var centerY=lowY-dataHeight/2;ctx.save();ctx.beginPath();ctx.lineWidth=1;ctx.fillStyle=c;ctx.strokeStyle=
c;ctx.translate(centerX-lowWidth/2,centerY-dataHeight/2);ctx.scale(lowWidth/2,dataHeight/2);ctx.arc(1,1,1,0,2*Math.PI,false);ctx.closePath();ctx.fill();ctx.restore()}function findNearbyItemPyramid(mouseX,mouseY,i,serie){var item=null;item=findNearby(mouseX,mouseY,i,serie);return item;function findNearby(mouseX,mouseY,i,serie){var item=null;var ln=Math.floor((canvasHeight-mouseY)/dataHeight);if(between(ln,0,serie.data.length-1)){var w=serie.data[ln].value*canvasWidth/dataMax;if(between(mouseX,centerX-
w/2,centerX+w/2)===true)item=[i,ln]}return item}}function drawHoverPyramid(octx,serie,dataIndex){octx.save();octx.translate(-offset.left,-offset.top);var c="rgba(255,255,255,"+serie.pyramid.highlight.opacity+")";drawItem(octx,serie,dataIndex,c);octx.restore()}}var between=$.plot.JUMlib.library.between;$.plot.plugins.push({init:init,options:options,name:pluginName,version:pluginVersion})})(jQuery);(function($){var pluginName="rectangle",pluginVersion="0.3";var options={series:{rectangle:{active:false,show:false,fill:true,lineWidth:2,directions:"tlbr",highlight:{opacity:0.5},drawRectangle:drawRectangleDefault,label:{show:false,fillStyle:"black"},debug:{active:false,createDocuTemplate:null}},editMode:"none",nearBy:{distance:6,findMode:"circle"}},grid:{show:false},yaxis:{min:0,max:100},xaxis:{min:0,max:100}};function drawRectangleDefault(ctx,serie,dataIndex){var d=serie.data[dataIndex];ctx.save();
ctx.linewidth=serie.rectangle.lineWidth;if(serie.rectangle.fill===true){ctx.fillStyle=d.pos.color;ctx.fillRect(d.pos.x,d.pos.y,d.pos.w,d.pos.h)}else{ctx.strokeStyle=d.pos.color;ctx.strokeRect(d.pos.x,d.pos.y,d.pos.w,d.pos.h)}ctx.restore();ctx.fillStyle=serie.color;ctx.strokeStyle=serie.color;ctx.lineWidth=serie.rectangle.lineWidth;if(serie.rectangle.label.show)drawRectangleLabel(ctx,serie,d);function drawRectangleLabel(ctx,serie,d){var xtext,ytext,vsize,f;ctx.fillStyle=serie.rectangle.label.fillStyle;
f=serie.xaxis.options.font;ctx.font=f.style+" "+f.variant+" "+f.weight+" "+f.size+"px '"+f.family+"'";vsize=ctx.measureText(d.label);xtext=d.pos.x+d.pos.w/2-vsize.width/2;ytext=d.pos.y+d.pos.h/2;ctx.fillText(d.label,xtext,ytext)}}function init(plot){var offset=null,opt=null,series=null,colors,sumRect;plot.hooks.processOptions.push(processOptions);function processOptions(plot,options){if(options.series.rectangle.active){opt=options;plot.hooks.processRawData.push(processRawData);plot.hooks.drawSeries.push(drawSeries);
if(opt.series.rectangle.debug.active===true)opt.series.rectangle.debug.createDocuTemplate=createDocuTemplate}}function processRawData(plot,s,data,datapoints){if(s.rectangle.show===true){s.nearBy.drawHover=drawHoverRectangle;s.nearBy.findItem=findNearbyItemRectangle}}function createDocuTemplate(){var z,frm;z=$.plot.JUMlib.docu.docuObjectToTemplate([{name:"data",tree:series.data},{name:"options.series.rectangle",tree:options.series.rectangle,takeDefault:true},{name:"options.series.rectangle",tree:opt.series.rectangle},
{name:"options.series.editMode",tree:options.series.editMode,takeDefault:true},{name:"options.series.editMode",tree:opt.series.editMode},{name:"options.series.nearBy",tree:options.series.nearBy,takeDefault:true},{name:"options.series.nearBy",tree:opt.series.nearBy}],pluginName);$.plot.JUMlib.docu.extendDocuObject(z,rectangle_docu,pluginName);frm=$.plot.JUMlib.docu.docuObjectToEdit(z,"");return{data:z,form:frm}}function drawSeries(plot,ctx,serie){var top=0,left=0,width=100,height=100,j;if(!serie.xaxis.options.font)serie.xaxis.options.font=
createFont(plot.getPlaceholder());if(serie.rectangle.show){series=serie;offset=plot.getPlotOffset();colors=createColors(opt,serie.data.length);sumRect=0;for(j=0;j<serie.data.length;j++)sumRect+=serie.data[j].data;for(j=0;j<serie.data.length;j++){var x,y,w,h,d,v;v=serie.data[j];d=serie.rectangle.directions[j%serie.rectangle.directions.length];switch(d){case "t":x=left;y=top;w=width;h=v.data/sumRect*100/width*100;top=top+h;height=height-h;break;case "b":x=left;h=v.data/sumRect*100/width*100;w=width;
y=top-h+height;height=height-h;break;case "l":x=left;y=top;w=v.data/sumRect*100/height*100;h=height;left=left+w;width=width-w;break;case "r":y=top;w=v.data/sumRect*100/height*100;x=left+width-w;h=height;width=width-w;break;default:x=left;y=top;w=width;h=v.data/sumRect*100/width*100;top=top+h;height=height-h}var cx,cy,cw,ch,color;cx=offset.left+serie.xaxis.p2c(x);cy=offset.top+serie.yaxis.p2c(100-y);cw=serie.xaxis.p2c(w)-serie.xaxis.p2c(0);ch=serie.yaxis.p2c(0)-serie.yaxis.p2c(h);color=$.plot.JUMlib.data.getColor({ctx:ctx,
serie:series,dataIndex:j,colors:colors,left:cx,top:cy,height:ch,width:cw});serie.data[j].pos={x:cx,y:cy,w:cw,h:ch,color:color};serie.rectangle.drawRectangle(ctx,serie,j)}}}function drawHoverRectangle(octx,serie,dataIndex){var d,c,pos;d=serie.data[dataIndex].pos;c="rgba(255,255,255,"+serie.rectangle.highlight.opacity+")";pos={x:d.x,y:d.y,w:d.w,h:d.h,color:c,dataPoint:d.dataPoint};serie.rectangle.drawRectangle(octx,serie,dataIndex)}function findNearbyItemRectangle(mouseX,mouseY,i,serie){var item=null;
item=findNearbyItem(mouseX,mouseY,i,serie);return item;function findNearbyItem(mouseX,mouseY,i,serie){var item=null;for(var j=0;j<serie.data.length;j++){var p=serie.data[j].pos;if(between(mouseX,p.x,p.x+p.w))if(between(mouseY,p.y,p.y+p.h))item=[i,j]}return item}}}var between=$.plot.JUMlib.library.between;var createFont=$.plot.JUMlib.data.createFont;var createColors=$.plot.JUMlib.data.createColors;$.plot.plugins.push({init:init,options:options,name:pluginName,version:pluginVersion})})(jQuery);(function($){var pluginName="spider",pluginVersion="0.6";var options={series:{spider:{active:false,show:false,spiderSize:0.8,lineWidth:3,lineStyle:"rgba(0,0,0,0.5)",pointSize:6,scaleMode:"leg",legMin:null,legMax:null,connection:{width:4},highlight:{opacity:0.5,mode:"point"},legs:{font:"20px Times New Roman",fillStyle:"Black",legScaleMin:0.95,legScaleMax:1.05,legStartAngle:0},debug:{active:false,createDocuTemplate:null}},editMode:"xy",nearBy:{distance:6,findItem:null,findMode:"circle",drawEdit:null,
drawHover:null}},grid:{tickColor:"rgba(0,0,0,0.15)",ticks:5,mode:"radar"}};function init(plot){var maxRadius=null,centerLeft=null,opt=null,centerTop=null,series=null,data;plot.hooks.processOptions.push(processOptions);function processOptions(plot,options){if(options.series.spider.active){options.grid.show=false;opt=options;plot.hooks.processRawData.push(processRawData);plot.hooks.draw.push(draw);if(opt.series.spider.debug.active===true)opt.series.spider.debug.createDocuTemplate=createDocuTemplate}}
function processRawData(plot,s,data,datapoints){if(s.spider.show===true){s.nearBy.drawEdit=drawEditSpider;s.nearBy.findItem=findNearbyItemSpider;s.nearBy.drawHover=drawHoverSpider}}function createDocuTemplate(){var z,frm;z=$.plot.JUMlib.docu.docuObjectToTemplate([{name:"data",tree:series.data},{name:"options.series.spider",tree:options.series.spider,takeDefault:true},{name:"options.series.spider",tree:opt.series.spider},{name:"options.series.editMode",tree:options.series.editMode,takeDefault:true},
{name:"options.series.editMode",tree:opt.series.editMode},{name:"options.series.nearBy",tree:options.series.nearBy,takeDefault:true},{name:"options.series.nearBy",tree:opt.series.nearBy}],pluginName);$.plot.JUMlib.docu.extendDocuObject(z,spider_docu,pluginName);frm=$.plot.JUMlib.docu.docuObjectToEdit(z,"");return{data:z,form:frm}}function draw(plot,ctx){data=plot.getData();opt=plot.getOptions();if(opt.series.spider.debug.active===true)series=data[0];clear(ctx);setupspider(ctx);calculateRanges();drawspider(ctx,
opt.grid)}function calculateRanges(){var ranges=[],j;if(data[0].spider.scaleMode==="leg")for(j=0;j<data[0].data.length;j++)ranges.push(calculateItemRanges(j));else{var range=calculateRange();for(j=0;j<data[0].data.length;j++)ranges.push(range)}data.ranges=ranges}function calculateItemRanges(j){var min=Number.POSITIVE_INFINITY,max=Number.NEGATIVE_INFINITY;for(var i=0;i<data.length;i++){min=Math.min(min,data[i].data[j][1]);max=Math.max(max,data[i].data[j][1])}min=min*data[0].spider.legs.legScaleMin;
max=max*data[0].spider.legs.legScaleMax;if(opt.series.spider.legMin)min=opt.series.spider.legMin;if(opt.series.spider.legMax)max=opt.series.spider.legMax;return{min:min,max:max,range:max-min}}function calculateRange(){var min=Number.POSITIVE_INFINITY,max=Number.NEGATIVE_INFINITY;for(var j=0;j<data[0].data.length;j++)for(var i=0;i<data.length;i++){min=Math.min(min,data[i].data[j][1]);max=Math.max(max,data[i].data[j][1])}min=min*data[0].spider.legs.legScaleMin;max=max*data[0].spider.legs.legScaleMax;
if(opt.series.spider.legMin)min=opt.series.spider.legMin;if(opt.series.spider.legMax)max=opt.series.spider.legMax;return{min:min,max:max,range:max-min}}function clear(ctx){ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height)}function setupspider(ctx){maxRadius=Math.min(ctx.canvas.width,ctx.canvas.height)/2*data[0].spider.spiderSize;centerTop=ctx.canvas.height/2;centerLeft=centerTop}function drawspiderPoints(ctx,cnt,serie,opt){for(var j=0;j<serie.data.length;j++)drawspiderPoint(ctx,cnt,serie,j,opt)}
function drawspiderPoint(ctx,cnt,serie,j,c){var pos;var d=calculatePosition(serie,data.ranges,j);pos=calculateXY(cnt,j,d);ctx.beginPath();ctx.lineWidth=1;ctx.fillStyle=c;ctx.strokeStyle=c;ctx.arc(pos.x,pos.y,serie.spider.pointSize,0,Math.PI*2,true);ctx.closePath();ctx.fill()}function drawspiderConnections(ctx,cnt,serie,c,fill){var pos,d;if(!fill)fill=false;ctx.beginPath();ctx.lineWidth=serie.spider.connection.width;ctx.strokeStyle=c;ctx.fillStyle=c;d=calculatePosition(serie,data.ranges,0);pos=calculateXY(cnt,
0,d);ctx.moveTo(pos.x,pos.y);for(var j=1;j<serie.data.length;j++){d=calculatePosition(serie,data.ranges,j);pos=calculateXY(cnt,j,d);ctx.lineTo(pos.x,pos.y)}d=calculatePosition(serie,data.ranges,0);pos=calculateXY(cnt,0,d);ctx.lineTo(pos.x,pos.y);if(fill===true)ctx.fill();else if(serie.spider.fill===true)ctx.fill();else ctx.stroke()}function drawspider(ctx,opt){var cnt=data[0].data.length,i;for(i=0;i<data.length;i++)drawspiderConnections(ctx,cnt,data[i],data[i].color);for(i=0;i<data.length;i++)drawspiderPoints(ctx,
cnt,data[i],data[i].color);drawGrid(ctx,opt);function drawGridRadar(ctx,opt){ctx.lineWidth=1;ctx.strokeStyle=opt.tickColor;for(var i=1;i<=opt.ticks;i++){ctx.beginPath();ctx.arc(centerLeft,centerTop,maxRadius/opt.ticks*i,0,Math.PI*2,true);ctx.closePath();ctx.stroke()}var startPoint=null;var breakPoint=null;for(var j=0;j<cnt;j++){if(startPoint===null){startPoint=calculateXY(cnt,j,100);breakPoint=calculateXY(cnt,Math.floor(cnt/4),100)}drawspiderLine(ctx,j);drawspiderLeg(ctx,j,startPoint,breakPoint)}}
function drawGridSpider(ctx,opt){var i,j;ctx.linewidth=1;ctx.strokeStyle=opt.tickColor;for(i=0;i<=opt.ticks;i++){var pos=calculateXY(cnt,0,100/opt.ticks*i);ctx.beginPath();ctx.moveTo(pos.x,pos.y);for(j=1;j<cnt;j++){pos=calculateXY(cnt,j,100/opt.ticks*i);ctx.lineTo(pos.x,pos.y)}ctx.closePath();ctx.stroke()}var startPoint=null;var breakPoint=null;for(j=0;j<cnt;j++){if(startPoint===null){startPoint=calculateXY(cnt,j,100);breakPoint=calculateXY(cnt,Math.floor(cnt/4),100)}drawspiderLine(ctx,j);drawspiderLeg(ctx,
j,startPoint,breakPoint)}}function drawGrid(ctx,opt){switch(opt.mode){case "radar":drawGridRadar(ctx,opt);break;case "spider":drawGridSpider(ctx,opt);break;default:drawGridRadar(ctx,opt);break}}function drawScale(ctx,opt){if(opt.series.spider.scaleMode!=="leg")for(var i=0;i<=opt.ticks;i++);}function drawspiderLine(ctx,j){var pos;ctx.beginPath();ctx.lineWidth=options.series.spider.lineWidth;ctx.strokeStyle=options.series.spider.lineStyle;ctx.moveTo(centerTop,centerLeft);pos=calculateXY(cnt,j,100);
ctx.lineTo(pos.x,pos.y);ctx.stroke()}function drawspiderLeg(ctx,j,startPoint,breakPoint,gridColor){var pos,metrics,extraX,extraY;pos=calculateXY(cnt,j,100);ctx.font=data[0].spider.legs.font;ctx.fillStyle=data[0].spider.legs.fillStyle;metrics=ctx.measureText(data[0].spider.legs.data[j].label);if(pos.y>startPoint.y)extraY=15;else extraY=-15;if(between(pos.y,startPoint.y+10,startPoint.y-10))extraY=0;if(pos.x<breakPoint.x)extraX=metrics.width*-1-metrics.width/2;else extraX=0;if(between(pos.x,startPoint.x+
10,startPoint.x-10))extraX=metrics.width/2;ctx.fillText(data[0].spider.legs.data[j].label,pos.x+extraX,pos.y+extraY)}}function calculatePosition(serie,ranges,j,v){var p;if(v)p=(v-ranges[j].min)/ranges[j].range*100;else{p=Math.max(Math.min(serie.data[j][1],ranges[j].max),ranges[j].min);p=(p-ranges[j].min)/ranges[j].range*100}return p}function calculateXY(cnt,j,d){var x,y,s;s=2*Math.PI*opt.series.spider.legs.legStartAngle/360;x=centerLeft+Math.round(Math.cos(2*Math.PI/cnt*j+s)*maxRadius*d/100);y=centerTop+
Math.round(Math.sin(2*Math.PI/cnt*j+s)*maxRadius*d/100);return{x:x,y:y}}function calculateFromCenter(mx,my){var d;d=(mx-centerLeft)*(mx-centerLeft)+(my-centerTop)*(my-centerTop);d=Math.sqrt(d);d=d/maxRadius*100;return d}function calculateValue(i,d){var v,range=data.ranges[i];v=range.min+range.range/100*d;return v}function findNearbyItemSpider(mouseX,mouseY,i,serie){var item=null;if(opt.series.justEditing){if(opt.series.justEditing[1].seriesIndex===i)item=findNearbyEdit(mouseX,mouseY,i,serie)}else item=
findNearby(mouseX,mouseY,i,serie);return item;function findNearby(mouseX,mouseY,i,serie){var j,pos,dx,dy,dist,item=null;var cnt=serie.data.length;for(j=0;j<cnt;j++){pos=calculateXY(cnt,j,calculatePosition(serie,data.ranges,j));dx=Math.abs(pos.x-mouseX);dy=Math.abs(pos.y-mouseY);dist=Math.sqrt(dx*dx+dy*dy);if(dist<=serie.nearBy.distance)item=[i,j]}return item}function findNearbyEdit(mouseX,mouseY,i,serie){var v,dx,dy,dist,pos,d,item=null;var cnt=serie.data.length,j=opt.series.justEditing[1].dataIndex;
d=calculateFromCenter(mouseX,mouseY);v=calculateValue(j,d);pos=calculateXY(cnt,j,d);dx=Math.abs(pos.x-mouseX);dy=Math.abs(pos.y-mouseY);dist=Math.sqrt(dx*dx+dy*dy);if(dist<=serie.spider.pointSize)item=[i,j,v,0];return item}}function drawEditSpider(octx,x,y,serie){octx.beginPath();octx.lineWidth=1;var c="rgba(255, 0, 0, "+serie.spider.highlight.opacity+")";octx.fillStyle=c;octx.strokeStyle=c;var v=calculatePosition(serie,data.ranges,opt.series.justEditing[1].dataIndex,opt.series.justEditing[0].value);
var pos=calculateXY(serie.data.length,opt.series.justEditing[1].dataIndex,v);octx.arc(pos.x,pos.y,opt.series.spider.pointSize,0,Math.PI*2,true);octx.closePath();octx.fill()}function drawHoverSpider(octx,serie,dataIndex){if(!serie.justEditing){var c="rgba(255, 255, 255, "+serie.spider.highlight.opacity+")",cnt=serie.data.length;switch(serie.spider.highlight.mode){case "point":drawspiderPoints(octx,cnt,serie,c);break;case "line":drawspiderConnections(octx,cnt,serie,c,false);break;case "area":drawspiderConnections(octx,
cnt,serie,serie.color,true);break;default:break}}}}var between=$.plot.JUMlib.library.between;$.plot.plugins.push({init:init,options:options,name:pluginName,version:pluginVersion})})(jQuery);(function($){var pluginName="rose",pluginVersion="0.1";var options={series:{rose:{active:false,show:false,roseSize:0.7,leafSize:0.7,dataMin:0,dataMax:100,highlight:{opacity:0.5},debug:{active:false,createDocuTemplate:null}},nearBy:{distance:6,findItem:null,findMode:"circle",drawEdit:null,drawHover:null}},grid:{show:false,ranges:5,font:"18px Times New Roman"}};function init(plot){var offset=null,opt=null,series=null,lctx,data;var maxRadius,centerLeft,centerTop,leafAngle,offsetAngle,colors;plot.hooks.processOptions.push(processOptions);
plot.hooks.processRawData.push(processRawData);function processOptions(plot,options){if(options.series.rose.active){opt=options;plot.hooks.drawSeries.push(drawSeries);plot.hooks.draw.push(draw);if(opt.series.rose.debug.active===true)opt.series.rose.debug.createDocuTemplate=createDocuTemplate}}function createDocuTemplate(){var z,frm;z=$.plot.JUMlib.docu.docuObjectToTemplate([{name:"data",tree:series.data},{name:"options.series.rose",tree:options.series.rose,takeDefault:true},{name:"options.series.rose",
tree:opt.series.rose}],pluginName);$.plot.JUMlib.docu.extendDocuObject(z,rose_docu,pluginName);frm=$.plot.JUMlib.docu.docuObjectToEdit(z,"");return{data:z,form:frm}}function processRawData(plot,series,data,datapoints){var canvas=plot.getCanvas();maxRadius=Math.min(canvas.width,canvas.height)/2*opt.series.rose.roseSize;centerTop=canvas.height/2;centerLeft=centerTop;if(series.rose.show===true){colors=createColors(opt,series.data[0].length);series.nearBy.findItem=findNearbyItemRose;series.nearBy.drawHover=
drawHoverRose;offset=plot.getPlotOffset();leafAngle=360/series.data.length;offsetAngle=leafAngle*(1-opt.series.rose.leafSize)/2}}function drawSeries(plot,ctx,serie){var angle,angleStart,angleEnd,radius,color,colorData;if(serie.rose.show){series=serie;angle=0;for(var j=0;j<serie.data.length;j++){angleStart=angle+offsetAngle;angleEnd=angle+leafAngle-offsetAngle;angle+=leafAngle;radius=getPieRadius(serie.data[j]);colorData={ctx:ctx,serie:serie,serieIndex:j,colors:colors,radius:radius,left:centerLeft,
top:centerTop};color=getColor(colorData);drawPie(ctx,angleStart,angleEnd,radius,color)}}}function drawPie(ctx,angleStart,angleEnd,radius,color){var s=2*Math.PI*angleStart/360,t=2*Math.PI*angleEnd/360,x=centerLeft+Math.round(Math.cos(s)*radius),y=centerTop+Math.round(Math.sin(s)*radius);ctx.strokeStyle=color;ctx.fillStyle=color;ctx.beginPath();ctx.moveTo(centerLeft,centerTop);ctx.lineTo(x,y);ctx.arc(centerLeft,centerTop,radius,s,t);ctx.lineTo(centerLeft,centerTop);ctx.closePath();ctx.fill()}function getPieRadius(data){return(data-
opt.series.rose.dataMin)/(opt.series.rose.dataMax-opt.series.rose.dataMin)*maxRadius}function draw(plot,ctx){var angle=0,i;lctx=ctx;data=plot.getData();ctx.strokeStyle=opt.grid.tickColor;ctx.fillStyle=opt.grid.color;for(i=1;i<=opt.grid.ranges;i++){drawGridRange(ctx,i);drawGridValue(ctx,i)}for(i=0;i<opt.grid.tickLabel.length;i++){drawGridLine(ctx,angle);drawGridLabel(ctx,angle+leafAngle/2,opt.grid.tickLabel[i]);angle+=leafAngle}function drawGridRange(ctx,i){var radius;ctx.beginPath();ctx.moveTo(centerLeft,
centerTop);radius=maxRadius/opt.grid.ranges*i;ctx.arc(centerLeft,centerTop,radius,0,Math.PI*2);ctx.closePath();ctx.stroke()}function drawGridValue(ctx,i){var t=opt.series.rose.dataMin+(opt.series.rose.dataMax-opt.series.rose.dataMin)/opt.grid.ranges*i;ctx.fillText(t,centerLeft+maxRadius/opt.grid.ranges*i,centerTop-1)}function drawGridLine(ctx,angle){var s=2*Math.PI*angle/360,x=centerLeft+Math.round(Math.cos(s)*maxRadius),y=centerTop+Math.round(Math.sin(s)*maxRadius);ctx.beginPath();ctx.moveTo(centerLeft,
centerTop);ctx.lineTo(x,y);ctx.closePath();ctx.stroke()}function drawGridLabel(ctx,angle,label){ctx.font=opt.grid.font;var s=2*Math.PI*angle/360,x=centerLeft+Math.round(Math.cos(s)*maxRadius),y=centerTop+Math.round(Math.sin(s)*maxRadius),metrics=ctx.measureText(label);if(angle<180)y+=10;if(between(angle,90,270))x-=metrics.width;ctx.fillText(label,x,y)}}function findNearbyItemRose(mouseX,mouseY,i,serie){return findNearby(mouseX,mouseY,i,serie);function findNearby(mouseX,mouseY,i,serie){var item=null,
angle,radius,j,k,r;angle=0;for(j=0;j<serie.data.length;j++){r=findItem(angle,maxRadius);if(r===true){item=[i,j];for(k=0;k<data.length;k++){radius=getPieRadius(data[k].data[j]);r=findItem(angle,radius);if(r===true)item=[k,j]}return item}angle+=leafAngle}function findItem(angle,radius){var r,s,t,x,y;lctx.save();lctx.beginPath();s=2*Math.PI*angle/360;t=2*Math.PI*(angle+leafAngle)/360;x=centerLeft+Math.round(Math.cos(s)*radius);y=centerTop+Math.round(Math.sin(s)*radius);lctx.moveTo(centerLeft,centerTop);
lctx.lineTo(x,y);lctx.arc(centerLeft,centerTop,radius,s,t);lctx.closePath();r=lctx.isPointInPath(mouseX,mouseY);lctx.restore();return r}return item}}function drawHoverRose(octx,serie,dataIndex){var angle=dataIndex*leafAngle;var c="rgba(255,255,255,"+serie.rose.highlight.opacity+")";drawPie(octx,angle,angle+leafAngle,maxRadius,c)}}var between=$.plot.JUMlib.library.between;var createColors=$.plot.JUMlib.data.createColors;var getColor=$.plot.JUMlib.data.getColor;$.plot.plugins.push({init:init,options:options,
name:pluginName,version:pluginVersion})})(jQuery);(function($){var pluginName="background",pluginVersion="0.4";var options={grid:{background:{active:false,mode:"color",color:{colors:["white","yellow","orange","blue"]},image:null,fncDraw:null,setZIndex:false}}};function init(plot,classes){var Canvas,background,bctx,opt,offset;Canvas=classes.Canvas;plot.hooks.processOptions.push(processOptions);function processOptions(plot,options){if(options.grid.background.active===true)plot.hooks.drawBackground.push(drawBackground)}function drawBackground(plot,
ctx){opt=plot.getOptions();var zIndex=opt.grid.background.setZIndex;background=new Canvas("flot-background",plot.getPlaceholder());if($.isNumeric(zIndex)===true){$(plot.getPlaceholder().children(".flot-overlay")).css("z-index",zIndex+1);$(plot.getCanvas()).css("z-index",zIndex);$(background.element).css("z-index",zIndex-1)}else if(opt.grid.background.setZIndex===true){$(plot.getPlaceholder().children(".flot-overlay")).css("z-index",2);$(plot.getCanvas()).css("z-index",1);$(background.element).css("z-index",
0)}else $(background.element).css("z-index",-1);bctx=background.context;offset=plot.getPlotOffset();bctx.save();bctx.translate(offset.left,offset.top);switch(opt.grid.background.mode){case "image":drawImage(plot,bctx);break;case "color":drawColor(plot,bctx);break;case "userdefined":drawByFunction(plot,bctx);break;default:drawColor(plot,bctx)}bctx.restore()}function drawByFunction(plot,bctx){opt.grid.background.fncDraw(plot,bctx,plot.width(),plot.height())}function drawImage(plot,bctx){var image=opt.grid.background.image;
if(typeof image!=="undefined")bctx.drawImage(image,0,0,plot.width(),plot.height())}function drawColor(plot,bctx){var color=$.plot.JUMlib.data.getColor({ctx:bctx,color:opt.grid.background.color,left:0,top:0,height:plot.height(),width:plot.width()});bctx.fillStyle=color;bctx.fillRect(0,0,plot.width(),plot.height())}}var getColor=$.plot.JUMlib.data.getColor;$.plot.plugins.push({init:init,options:options,name:pluginName,version:pluginVersion})})(jQuery);(function($){var pluginName="radar",pluginVersion="0.1";var options={series:{radar:{active:false,show:false,radarSize:0.8,delay:10,angleStep:1,angleSize:10,angleSteps:6,color:"darkgreen",backColor:"darkgreen",debug:{active:false,createDocuTemplate:null}}}};function init(plot){var maxRadius=null,centerLeft=null,centerTop=null;var opt=null,series=null,data=null;var rcanvas=null,rctx=null,rfunc=null,rangle=0;plot.hooks.processOptions.push(processOptions);function processOptions(plot,options){if(options.series.radar.active){options.grid.show=
false;opt=options;plot.hooks.processRawData.push(processRawData);plot.hooks.draw.push(draw);if(opt.series.radar.debug.active===true)opt.series.radar.debug.createDocuTemplate=createDocuTemplate}}function createDocuTemplate(){var z,frm;z=$.plot.JUMlib.docu.docuObjectToTemplate([{name:"data",tree:series.data},{name:"options.series.radar",tree:options.series.radar,takeDefault:true},{name:"options.series.radar",tree:opt.series.radar}],pluginName);$.plot.JUMlib.docu.extendDocuObject(z,radar_docu,pluginName);
frm=$.plot.JUMlib.docu.docuObjectToEdit(z,"");return{data:z,form:frm}}function processRawData(plot,s,data,datapoints){if(s.radar.show===true);}function draw(plot,ctx){data=plot.getData();opt=plot.getOptions();clear(ctx);setupRadar(ctx);for(var i=0;i<data.length;i++)drawSerie(plot,ctx,data[i]);rfunc=window.setInterval(rotating,opt.series.radar.delay)}function rotating(){var angleSize=opt.series.radar.angleSize,angleSteps=opt.series.radar.angleSteps,alpha,rangleStart;clear(rctx);rctx.lineWidth=1;for(var i=
1;i<=angleSteps;i++){alpha=(angleSteps-i+1)/10;rangleStart=(i-1)*angleSize+rangle;drawRotatePart("rgba(255,255,255,"+alpha+")",rangleStart,angleSize+rangleStart)}drawRotatePart(opt.series.radar.backColor,rangle+angleSteps*angleSize,rangle);rangle=rangle+opt.series.radar.angleStep;if(rangle>359)rangle=0}function drawRotatePart(c,angles,anglet){var s=2*Math.PI*angles/360,t=2*Math.PI*anglet/360,x=centerLeft+Math.round(Math.cos(s)*maxRadius),y=centerTop+Math.round(Math.sin(s)*maxRadius);rctx.strokeStyle=
c;rctx.fillStyle=c;rctx.beginPath();rctx.moveTo(centerLeft,centerTop);rctx.lineTo(x,y);rctx.arc(centerLeft,centerTop,maxRadius,s,t);rctx.lineTo(centerLeft,centerTop);rctx.closePath();rctx.fill()}function clear(ctx){ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height)}function setupRadar(ctx){maxRadius=Math.min(ctx.canvas.width,ctx.canvas.height)/2*opt.series.radar.radarSize;centerTop=ctx.canvas.height/2;centerLeft=centerTop;ctx.beginPath();ctx.lineWidth=2;ctx.strokeStyle=opt.series.radar.color;ctx.fillStyle=
opt.series.radar.backColor;ctx.arc(centerTop,centerLeft,maxRadius,0,Math.PI*2,true);ctx.closePath();ctx.fill();rcanvas=document.createElement("canvas");rcanvas.width=ctx.canvas.width;rcanvas.height=ctx.canvas.height;$(rcanvas).css({position:"absolute",left:0,top:0});$(rcanvas).appendTo(plot.getPlaceholder());rctx=rcanvas.getContext("2d")}function drawSerie(plot,ctx,serie){if(opt.series.radar.debug.active===true)series=serie;for(var i=0;i<serie.data.length;i++)drawItem(plot,ctx,serie,serie.data[i])}
function drawItem(plot,ctx,serie,item){var s=2*Math.PI*item[0]/360,itemSize=serie.radar.itemSize,x=centerLeft+Math.round(Math.cos(s)*maxRadius*item[1]/100)-itemSize,y=centerTop+Math.round(Math.sin(s)*maxRadius*item[1]/100)-itemSize;ctx.beginPath();ctx.lineWidth=1;ctx.fillStyle=serie.color;ctx.strokeStyle=serie.color;ctx.arc(x,y,itemSize,0,Math.PI*2,true);ctx.closePath();ctx.fill()}}$.plot.plugins.push({init:init,options:options,name:pluginName,version:pluginVersion})})(jQuery);(function($){var pluginName="spiral",pluginVersion="0.3";var options={series:{spiral:{active:false,show:false,spiralSize:0.8,rotations:3,steps:36,delay:50,highlight:{opacity:0.5},debug:{active:false,createDocuTemplate:null}},nearBy:{distance:6,findItem:null,findMode:"circle",drawEdit:null,drawHover:null}},grid:{show:false}};function init(plot){var offset=null,opt=null,series=null,lctx;var colors,sumPies,maxRadius,centerLeft,centerTop;var stepNo,rotationNo,pies=[],rfunc,angleStart;plot.hooks.processOptions.push(processOptions);
function processOptions(plot,options){if(options.series.spiral.active){opt=options;plot.hooks.drawSeries.push(drawSeries);if(opt.series.spiral.debug.active===true)opt.series.spiral.debug.createDocuTemplate=createDocuTemplate}}function createDocuTemplate(){var z,frm;z=$.plot.JUMlib.docu.docuObjectToTemplate([{name:"data",tree:series.data},{name:"options.series.spiral",tree:options.series.spiral,takeDefault:true},{name:"options.series.spiral",tree:opt.series.spiral}],pluginName);$.plot.JUMlib.docu.extendDocuObject(z,
spiral_docu,pluginName);frm=$.plot.JUMlib.docu.docuObjectToEdit(z,"");return{data:z,form:frm}}function drawSeries(plot,ctx,serie){var j;if(serie.spiral.show){series=serie;offset=plot.getPlotOffset();colors=createColors(opt,serie.data.length);maxRadius=Math.min(ctx.canvas.width,ctx.canvas.height)/2*opt.series.spiral.spiralSize;centerTop=ctx.canvas.height/2;centerLeft=centerTop;lctx=ctx;sumPies=0;for(j=0;j<serie.data.length;j++)sumPies+=serie.data[j].data;for(j=0;j<serie.data.length;j++)pies.push({data:serie.data[j].data,
size:serie.data[j].data/sumPies*360})}stepNo=1;rotationNo=1;rfunc=window.setInterval(spiraling,opt.series.spiral.delay)}function spiraling(){var radius,angle,l_stepNo,l_steps,color;lctx.clearRect(0,0,lctx.canvas.width,lctx.canvas.height);if(opt.series.spiral.rotations===0){angleStart=0;l_steps=opt.series.spiral.steps}else{angleStart=stepNo*360/opt.series.spiral.steps;l_steps=opt.series.spiral.steps*opt.series.spiral.rotations}for(var i=0;i<pies.length;i++){l_stepNo=(rotationNo-1)*opt.series.spiral.steps+
stepNo;radius=l_stepNo/l_steps*maxRadius;angle=l_stepNo/l_steps*pies[i].size;color=getColor({ctx:lctx,serie:series,dataIndex:i,colors:colors,radius:radius,left:centerLeft,top:centerTop});drawPie(lctx,angleStart,angleStart+angle,radius,color);angleStart+=angle}stepNo++;if(stepNo>opt.series.spiral.steps){stepNo=1;rotationNo++;if(rotationNo>opt.series.spiral.rotations){window.clearInterval(rfunc);series.nearBy.findItem=findNearbyItemSpiral;series.nearBy.drawHover=drawHoverSpiral}}}function drawPie(lctx,
anglestart,angleEnd,radius,color){var s=2*Math.PI*angleStart/360,t=2*Math.PI*angleEnd/360,x=centerLeft+Math.round(Math.cos(s)*radius),y=centerTop+Math.round(Math.sin(s)*radius);lctx.strokeStyle=color;lctx.fillStyle=color;lctx.beginPath();lctx.moveTo(centerLeft,centerTop);lctx.lineTo(x,y);lctx.arc(centerLeft,centerTop,radius,s,t);lctx.lineTo(centerLeft,centerTop);lctx.closePath();lctx.fill()}function findNearbyItemSpiral(mouseX,mouseY,i,serie){return findNearby(mouseX,mouseY,i,serie);function findNearby(mouseX,
mouseY,i,serie){var item=null,j;angleStart=0;for(j=0;j<pies.length;j++){lctx.save();lctx.beginPath();var s=2*Math.PI*angleStart/360,t=2*Math.PI*(angleStart+pies[j].size)/360,x=centerLeft+Math.round(Math.cos(s)*maxRadius),y=centerTop+Math.round(Math.sin(s)*maxRadius);lctx.moveTo(centerLeft,centerTop);lctx.lineTo(x,y);lctx.arc(centerLeft,centerTop,maxRadius,s,t);lctx.closePath();if(lctx.isPointInPath(mouseX,mouseY)){item=[i,j];lctx.restore();return item}angleStart+=pies[j].size}return item}}function drawHoverSpiral(octx,
serie,dataIndex){angleStart=0;for(var i=0;i<dataIndex;i++)angleStart+=pies[i].size;var c="rgba(255,255,255,"+serie.spiral.highlight.opacity+")";drawPie(octx,angleStart,angleStart+pies[dataIndex].size,maxRadius,c)}}var between=$.plot.JUMlib.library.between;var createFont=$.plot.JUMlib.data.createFont;var createColors=$.plot.JUMlib.data.createColors;var getColor=$.plot.JUMlib.data.getColor;$.plot.plugins.push({init:init,options:options,name:pluginName,version:pluginVersion})})(jQuery);