<!doctype html><html lang=en-US data-bs-theme=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=preload href=https://docs.defectdojo.com/fonts/vendor/jost/jost-v4-latin-regular.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=https://docs.defectdojo.com/fonts/vendor/jost/jost-v4-latin-500.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=https://docs.defectdojo.com/fonts/vendor/jost/jost-v4-latin-700.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=https://docs.defectdojo.com/fonts/worksans/work-sans-v19-latin-regular.woff2 as=font type=font/woff2 crossorigin><link rel=preload href=https://docs.defectdojo.com/fonts/worksans/work-sans-v19-latin-500.woff2 as=font type=font/woff2 crossorigin><script src=/js/color-mode.86a91f050a481d0a3f0c72ac26543cb6228c770875981c58dcbc008fd3f875c8.js integrity="sha256-hqkfBQpIHQo/DHKsJlQ8tiKMdwh1mBxY3LwAj9P4dcg="></script><link rel=stylesheet href="/main.a3003de0a1e93de35fc11ea824d68a6e179710816d5fb04061d0a53c757a8a79ff7c7c7e268fd1826b38d7f604e07465971ad335c031d79152b28bc8ea2ca636.css" integrity="sha512-owA94KHpPeNfwR6oJNaKbheXEIFtX7BAYdClPHV6inn/fHx+Jo/Rgms41/YE4HRllxrTNcAx15FSsovI6iymNg==" crossorigin=anonymous><noscript><style>img.lazyload{display:none}</style></noscript><base href=https://docs.defectdojo.com/changelog/os_upgrading/2.53/><link rel=canonical href=https://docs.defectdojo.com/changelog/os_upgrading/2.53/><title>Upgrading to DefectDojo Version 2.53.x | DefectDojo Documentation</title><meta name=description content="Helm chart: changes for initializer annotations + Replaced Redis with Valkey + HPA & PDB support + Batch Deduplication"><link rel=icon href=/favicon.ico sizes=32x32><link rel=icon href=/favicon.svg type=image/svg+xml><link rel=apple-touch-icon href=/apple-touch-icon.png sizes=180x180 type=image/png><link rel=icon href=/favicon-192x192.png sizes=192x192 type=image/png><link rel=icon href=/favicon-512x512.png sizes=512x512 type=image/png><link rel=manifest href=/manifest.webmanifest><meta property="og:url" content="https://docs.defectdojo.com/changelog/os_upgrading/2.53/"><meta property="og:site_name" content="DefectDojo Documentation"><meta property="og:title" content="Upgrading to DefectDojo Version 2.53.x"><meta property="og:description" content="Helm chart: changes for initializer annotations + Replaced Redis with Valkey + HPA & PDB support + Batch Deduplication"><meta property="og:locale" content="en_US"><meta property="og:type" content="article"><meta property="article:section" content="changelog"><meta property="og:image" content="https://docs.defectdojo.com/cover.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://docs.defectdojo.com/cover.png"><meta name=twitter:title content="Upgrading to DefectDojo Version 2.53.x"><meta name=twitter:description content="Helm chart: changes for initializer annotations + Replaced Redis with Valkey + HPA & PDB support + Batch Deduplication"><meta name=twitter:site content="@getdoks"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://docs.defectdojo.com/","name":"Defect Dojo Documentation","position":1},{"@type":"ListItem","item":"https://docs.defectdojo.com/changelog/","name":"Changelogs","position":2},{"@type":"ListItem","item":"https://docs.defectdojo.com/changelog/os_upgrading/","name":"Upgrading","position":3},{"@type":"ListItem","name":"Upgrading to Defect Dojo Version 2.53.x","position":4}]}</script><script type=text/javascript>!function(){var e,t="a92cfcfa51eca96",n=function(){Reo.init({clientID:"a92cfcfa51eca96"})};(e=document.createElement("script")).src="https://static.reo.dev/"+t+"/reo.js",e.async=!0,e.onload=n,document.head.appendChild(e)}()</script><script>function initApollo(){var t=Math.random().toString(36).substring(7),e=document.createElement("script");e.src="https://assets.apollo.io/micro/website-tracker/tracker.iife.js?nocache="+t,e.async=!0,e.defer=!0,e.onload=function(){window.trackingFunctions.onLoad({appId:"68ffca00b8c4dc001de5fec3"})},document.head.appendChild(e)}initApollo()</script><link rel=stylesheet href=https://docs.defectdojo.com/css/main.min.css><meta name=docsearch:audience content=" public"></head><body class="single section changelog" data-bs-spy=scroll data-bs-target=#toc data-bs-root-margin="0px 0px -60%" data-bs-smooth-scroll=true tabindex=0><div class=sticky-top><header class="navbar navbar-expand-lg"><div class=container-lg><div id=docsearch class=d-none tabindex=-1 aria-disabled=true></div><button type=button id=searchToggleMobile class="btn btn-link nav-link mx-2 d-lg-none" aria-label="Search website">
<svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
</button>
<button class="btn btn-link nav-link mx-2 order-3 d-lg-none" type=button data-bs-toggle=offcanvas data-bs-target=#offcanvasNavMain aria-controls=offcanvasNavMain aria-label="Open main navigation menu">
<svg class="icon icon-tabler icon-tabler-menu" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><line x1="4" y1="8" x2="20" y2="8"/><line x1="4" y1="16" x2="20" y2="16"/></svg></button><div class="offcanvas offcanvas-end h-auto" tabindex=-1 id=offcanvasNavMain aria-labelledby=offcanvasNavMainLabel><div class=offcanvas-header><h5 class=offcanvas-title id=offcanvasNavMainLabel>DefectDojo Documentation</h5><button type=button class="btn btn-link nav-link p-0 ms-auto" data-bs-dismiss=offcanvas aria-label=Close>
<svg class="icon icon-tabler icon-tabler-x" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M18 6 6 18"/><path d="M6 6l12 12"/></svg></button></div><div class="offcanvas-body d-flex flex-column flex-lg-row align-items-center"><span id=hs_cos_wrapper_header_logo class="d-flex align-items-center"><img src=/svgs/logo-lightmode.svg class=logo-lightmode alt=DefectDojo width=184>
<img src=/svgs/logo-darkmode.svg class=logo-darkmode alt=DefectDojo width=184>
<span class="ms-2 text-bs-body fw-bold">| docs</span></span><div class="flex-grow-1 d-none d-lg-flex justify-content-center align-items-center">2.55.0 üåà |
<a href=/changelog/pro_changelog/><button type=button class="btn btn-link nav-link p-2 d-none d-lg-block" aria-label="Release Notes">
<span class=fw-bold>Release Notes</span></button></a></div><div class="flex-grow-1 d-none d-lg-flex justify-content-center align-items-center"><div class="d-flex align-items-center border rounded px-3"><button type=button id=searchToggleDesktop class="btn btn-link nav-link mx-2 d-none d-lg-block" aria-label="Search website">
<span class=fw-bold>Search docs </span><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg></button></div></div><div class="d-flex align-items-center ms-lg-auto"><button id=buttonColorMode class="btn btn-link mx-auto nav-link p-0 ms-lg-2 me-lg-1" type=button aria-label="Toggle theme">
<svg data-bs-theme-value="dark" class="icon icon-tabler icon-tabler-moon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 3c.132.0.263.0.393.0a7.5 7.5.0 007.92 12.446A9 9 0 1112 2.992z"/></svg>
<svg data-bs-theme-value="light" class="icon icon-tabler icon-tabler-sun" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 12m-4 0a4 4 0 108 0 4 4 0 10-8 0m-5 0h1m8-9v1m8 8h1m-9 8v1M5.6 5.6l.7.7m12.1-.7-.7.7m0 11.4.7.7m-12.1-.7-.7.7"/></svg></button><ul id=socialMenu class="nav mx-auto flex-row order-lg-4"><li class=nav-item><a class="nav-link social-link" href=https://www.youtube.com/@defectdojo><svg width="16" height="16" fill="currentColor" class="bi bi-youtube" viewBox="0 0 16 16"><path d="M8.051 1.999h.089c.822.003 4.987.033 6.11.335a2.01 2.01.0 011.415 1.42c.101.38.172.883.22 1.402l.01.104.022.26.008.104c.065.914.073 1.77.074 1.957v.075c-.001.194-.01 1.108-.082 2.06l-.008.105-.009.104c-.05.572-.124 1.14-.235 1.558a2.01 2.01.0 01-1.415 1.42c-1.16.312-5.569.334-6.18.335h-.142c-.309.0-1.587-.006-2.927-.052l-.17-.006-.087-.004-.171-.007-.171-.007c-1.11-.049-2.167-.128-2.654-.26a2.01 2.01.0 01-1.415-1.419c-.111-.417-.185-.986-.235-1.558L.09 9.82.082 9.716A31 31 0 010 7.68v-.123c.002-.215.01-.958.064-1.778l.007-.103.003-.052.008-.104.022-.26.01-.104c.048-.519.119-1.023.22-1.402a2.01 2.01.0 011.415-1.42c.487-.13 1.544-.21 2.654-.26l.17-.007.172-.006.086-.003.171-.007A1e2 1e2.0 017.858 2zM6.4 5.209v4.818l4.157-2.408z"/></svg><small class="ms-2 visually-hidden">YouTube</small></a></li><li class=nav-item><a class="nav-link social-link" href=https://www.linkedin.com/company/defectdojo/><svg width="16" height="16" fill="currentColor" class="bi bi-linkedin" viewBox="0 0 16 16"><path d="M0 1.146C0 .513.526.0 1.175.0h13.65C15.474.0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487.0 14.854zm4.943 12.248V6.169H2.542v7.225zm-1.2-8.212c.837.0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248S2.4 3.226 2.4 3.934c0 .694.521 1.248 1.327 1.248zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869.0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274.0-1.845.7-2.165 1.193v.025h-.016l.016-.025V6.169h-2.4c.03.678.0 7.225.0 7.225z"/></svg><small class="ms-2 visually-hidden">Linkedin</small></a></li><li class=nav-item><a class="nav-link social-link" href=https://x.com/defectdojo><svg class="icon icon-tabler icon-tabler-brand-x" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 4l11.733 16H20L8.267 4z"/><path d="M4 20l6.768-6.768m2.46-2.46L20 4"/></svg><small class="ms-2 visually-hidden">X</small></a></li><li class=nav-item><a class="nav-link social-link" href=https://github.com/DefectDojo/django-DefectDojo><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg><small class="ms-2 visually-hidden">GitHub</small></a></li></ul></div></div><div class="w-100 mt-3"><ul class="navbar-nav flex-grow-1"><li class=nav-item><a class=nav-link href=https://docs.defectdojo.com/get_started/about/about_defectdojo>Get started ‚è∑</a></li><li class=nav-item><a class=nav-link href=https://docs.defectdojo.com/import_data/import_intro/comparison/>Import data ‚è∑</a></li><li class=nav-item><a class=nav-link href=https://docs.defectdojo.com/triage_findings/findings_workflows/intro_to_findings/>Triage Findings ‚è∑</a></li><li class=nav-item><a class=nav-link href=https://docs.defectdojo.com/asset_modelling/hierarchy/pro__assets_organizations/>Model your assets ‚è∑</a></li><li class=nav-item><a class=nav-link href=https://docs.defectdojo.com/metrics_reports/dashboards/introduction_dashboard/>Metrics & reports ‚è∑</a></li><li class=nav-item><a class=nav-link href=https://docs.defectdojo.com/automation/api/api-v2-docs/>Automation ‚è∑</a></li><li class=nav-item><a class=nav-link href=https://docs.defectdojo.com/issue_tracking/intro/intro/>Issue tracking ‚è∑</a></li><li class=nav-item><a class=nav-link href=https://docs.defectdojo.com/admin/admin_intro/intro/>Admin ‚è∑</a></li><li class=nav-item><a class=nav-link href=https://docs.defectdojo.com/supported_tools/>Supported tools ‚è∑</a></li></ul></div></div></div></header></div><div class="wrap container-lg" role=document><div class=content><div class="row flex-xl-nowrap"><nav class="docs-toc d-none d-xl-block col-xl-3" aria-label="Secondary navigation"><div class=page-links><h3>On this page</h3><nav id=toc><ul><li><a href=#helm-chart-changes>Helm Chart Changes</a><ul><li></li><li><a href=#breaking-changes>Breaking changes</a></li></ul></li><li><a href=#reimport-updates-fields-fix_available-and-fix_version>Reimport updates fields fix_available and fix_version</a></li><li><a href=#batch-deduplication>Batch Deduplication</a></li></ul></nav></div></nav><main class="docs-content col-lg-11 col-xl-9 mx-xl-auto"><h1>Upgrading to DefectDojo Version 2.53.x</h1><nav class="toc-mobile d-xl-none" aria-label="Quaternary navigation"><details><summary>On this page</summary><div class=page-links><nav id=TableOfContents><ul><li><a href=#helm-chart-changes>Helm Chart Changes</a><ul><li></li><li><a href=#breaking-changes>Breaking changes</a></li></ul></li><li><a href=#reimport-updates-fields-fix_available-and-fix_version>Reimport updates fields fix_available and fix_version</a></li><li><a href=#batch-deduplication>Batch Deduplication</a></li></ul></nav></div></details></nav><h2 id=helm-chart-changes>Helm Chart Changes<a href=#helm-chart-changes class=anchor aria-hidden=true>#</a></h2><ul><li>This release introduces an important change to the Helm chart configuration for the initializer job.</li><li>DefectDojo <code>2.52.0</code> replaced Redis with Valkey in <code>docker-compose</code> deployment. DefectDojo <code>2.53.0</code> (chart <code>1.9.0</code>) is replacing it in HELM charts.</li><li>Add support for HPA and PDB</li></ul><h4 id=hpa--pda>HPA & PDA<a href=#hpa--pda class=anchor aria-hidden=true>#</a></h4><p>Added Helm chart support for Celery and Django deployments for Horizontal Pod Autoscaler using <code>.autoscaling</code> fields under each section. And Pod Disruption Budget using <code>.podDisruptionBudget</code> for any of Celery Beat/Worker or Django deploy</p><h3 id=breaking-changes>Breaking changes<a href=#breaking-changes class=anchor aria-hidden=true>#</a></h3><h4 id=valkey>Valkey<a href=#valkey class=anchor aria-hidden=true>#</a></h4><h5 id=renamed-values>Renamed values<a href=#renamed-values class=anchor aria-hidden=true>#</a></h5><p>HELM values had been changed to the following:</p><ul><li><code>createRedisSecret</code> ‚Üí <code>createValkeySecret</code></li><li><code>redis.enabled</code> ‚Üí <code>valkey.enabled</code></li><li><code>redis.auth.existingSecret</code> ‚Üí <code>valkey.auth.existingSecret</code>, plus value is pointing to secret <code>defectdojo-valkey-specific</code> now</li><li><code>redis.auth.existingSecretPasswordKey</code> ‚Üí <code>valkey.auth.existingSecretPasswordKey</code>, plus value is pointing to secret <code>valkey-password</code> now</li><li><code>redis.auth.password</code> ‚Üí <code>valkey.auth.password</code></li><li><code>redis.master.service.ports.redis</code> ‚Üí <code>valkey.service.port</code></li><li><code>redis.sentinel...</code> ‚Üí <code>valkey.sentinel...</code></li><li><code>redis.tls...</code> ‚Üí <code>valkey.tls...</code></li></ul><p>The whole subchart is based on
<a class="link link--text" href=https://artifacthub.io/packages/helm/cloudpirates-valkey/valkey rel=external><code>cloudpirates-valkey</code></a>, so all additional values can be found there.</p><p>If an external Redis instance is being used, set the parameter <code>valkey.enabled</code> to <code>False</code>. The parameters <code>redisServer</code> and <code>redisParams</code> remain available and function as before. Additionally, <code>redisScheme</code> and <code>redisPort</code> have been introduced to accommodate users requiring these configurations.</p><h5 id=how-to-migrate-to-valkey>How to migrate to Valkey<a href=#how-to-migrate-to-valkey class=anchor aria-hidden=true>#</a></h5><ol start=0><li>As always, perform a backup of your instance</li><li>If you would like to be 100% sure that you do not miss any async event (triggered deduplication, email notification, &mldr;) it is recommended to perform the following substeps (if your system is not in production and/or you are willing to miss some notifications or postpone deduplication to a later time, feel free to skip these substeps)
0. Perform the following steps with your previous version of HELM chart (not with the upgraded one - you might lose your data)<ol><li>Downscale all producers of async tasks:<ul><li>Set <code>django.replicas</code> to 0 (if you used HPA, adjust it based on your needs)</li><li>Set <code>celery.beat.replicas</code> to 0 (if you used HPA, adjust it based on your needs)</li><li>Do not change <code>celery.worker.replicas</code> (they are responsible for processing your async tasks)</li></ul></li><li>Wait until the processing queue is empty (choose one of the following methods):<ul><li><code>kubectl exec statefulset/defectdojo-redis-master -c redis -- redis-cli -a `kubectl get secret defectdojo-redis-specific -o go-template='{{index .data "redis-password" | base64decode}}'` llen celery</code> &ndash; should output 0 (if your HELM chart used a different name, adjust the command based on your environment)</li><li><code>kubectl logs deployment/defectdojo-celery-worker -c celery --all-pods=true --follow</code> &ndash; should stop outputting new task logs</li></ul></li></ol></li><li>Replace values based on the <em>Renamed values</em> part, update the chart version, and set the number of replicas back. Be aware that Valkey is using a password from the new location, and if you use <code>createRedisSecret</code>/<code>createValkeySecret</code> password will be regenerated. If you stored this password somewhere else, it will not be valid anymore.</li><li>Enjoy DefectDojo</li></ol><h4 id=initializer-annotation-handling>Initializer Annotation Handling<a href=#initializer-annotation-handling class=anchor aria-hidden=true>#</a></h4><ul><li><strong>Renamed initializer annotations</strong>: The <code>initializer.annotations</code> field has been renamed to <code>initializer.podAnnotations</code> for clarity and consistency with other DefectDojo resources.</li><li><strong>Merged annotation support</strong>: Global <code>extraAnnotations</code> are now automatically merged with the initializer&rsquo;s <code>podAnnotations</code> to ensure consistent annotation handling across all resources.</li></ul><blockquote><p>The previous implementation did not merge global <code>extraAnnotations</code> with the initializer job&rsquo;s pod annotations, causing inconsistencies in annotation management.</p></blockquote><h5 id=moved-values>Moved values<a href=#moved-values class=anchor aria-hidden=true>#</a></h5><p>The following Helm chart values have been modified in this release:</p><ul><li><code>initializer.annotations</code> ‚Üí <code>initializer.podAnnotations</code> (applies to Pod template metadata within the Job)</li></ul><p>Note: <code>initializer.jobAnnotations</code> affects the Job spec metadata, while <code>initializer.podAnnotations</code> affects the Pod template metadata within the Job.</p><h5 id=migration>Migration<a href=#migration class=anchor aria-hidden=true>#</a></h5><p>If you were using:</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>initializer</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>annotations</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>foo</span><span class=p>:</span><span class=w> </span><span class=l>bar</span></span></span></code></pre></div></figure></div><p>Update to:</p><div class=expressive-code><figure class="frame not-content"><figcaption class=header><span class=title></span></figcaption><div class=highlight><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>initializer</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>podAnnotations</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>foo</span><span class=p>:</span><span class=w> </span><span class=l>bar</span></span></span></code></pre></div></figure></div><p>Both <code>extraAnnotations</code> and <code>initializer.podAnnotations</code> will now be properly applied to the initializer pod.</p><h2 id=reimport-updates-fields-fix_available-and-fix_version>Reimport updates fields fix_available and fix_version<a href=#reimport-updates-fields-fix_available-and-fix_version class=anchor aria-hidden=true>#</a></h2><p>Reimport will update existing findings <code>fix_available</code> and <code>fix_version</code> fields based on the incoming scan report.</p><h2 id=batch-deduplication>Batch Deduplication<a href=#batch-deduplication class=anchor aria-hidden=true>#</a></h2><p>Before 2.53.0 Defect Dojo has been deduplicating new or updated findings one-by-one. This works well for small imports and has the benefit of an easy to understand codebase and test suite. For larger imports however the performance is bad and resource usage is (very) high. A 1000+ finding import can cause a celery worker to spend minutes on deduplication.</p><p>PR
<a class="link link--text" href=https://github.com/DefectDojo/django-DefectDojo/pull/13491 rel=external>13491</a> changes the deduplication process for import and reimport to be done in batches. This biggest benefit is that there now will be 1 database query per batch (1000 findings), instead of 1 query per finding (1000 queries).</p><p>A quick test with the <code>jfrog_xray_unified/very_many_vulns.json</code> samples scan (10k findings) shwo the obvious huge improvement in deduplication time. Please note that we&rsquo;re not only doing this for performance, but also to reduce the resources (cloud cost) needed to run Defect Dojo.</p><p>initial import (no duplicates):</p><table><thead><tr><th>branch</th><th style=text-align:center>import time</th><th style=text-align:center>dedupe time</th><th style=text-align:center>total time</th></tr></thead><tbody><tr><td>dev</td><td style=text-align:center>~200s</td><td style=text-align:center>~400s</td><td style=text-align:center>~600s</td></tr><tr><td>dedupe-batching</td><td style=text-align:center>~190s</td><td style=text-align:center><em>~12s</em></td><td style=text-align:center>~200s</td></tr></tbody></table><p>second import into the same product (all duplicates):
initial import (no duplicates):</p><table><thead><tr><th>branch</th><th style=text-align:center>import time</th><th style=text-align:center>dedupe time</th><th style=text-align:center>total time</th></tr></thead><tbody><tr><td>dev</td><td style=text-align:center>~200s</td><td style=text-align:center>~400s</td><td style=text-align:center>~600s</td></tr><tr><td>dedupe-batching</td><td style=text-align:center>~190s</td><td style=text-align:center><em>~180s</em></td><td style=text-align:center>~370s</td></tr></tbody></table><p>There are no other special instructions for upgrading to 2.53.x. Check the
<a class="link link--text" href=https://github.com/DefectDojo/django-DefectDojo/releases/tag/2.53.0 rel=external>Release Notes</a> for the contents of the release.</p><div class="page-footer-meta d-flex flex-column flex-md-row justify-content-between"></div><div class="page-nav d-flex flex-column flex-sm-row"><div class="card w-100"><div class="card-body d-flex"><div class="d-flex flex-column justify-content-center"><svg class="icon icon-tabler icon-tabler-arrow-left" width="20" height="20" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12h14"/><path d="M5 12l6 6"/><path d="M5 12l6-6"/></svg></div><div class="d-flex flex-column"><div class=text-body-secondary>Prev</div><a href=/changelog/os_upgrading/2.54/ class="stretched-link text-reset text-decoration-none">Upgrading to DefectDojo Version 2.54.x</a></div></div></div><div class=m-2></div><div class="card text-end w-100"><div class="card-body d-flex justify-content-end"><div class="d-flex flex-column"><div class=text-body-secondary>Next</div><a href=/changelog/os_upgrading/2.52/ class="stretched-link text-reset text-decoration-none">Upgrading to DefectDojo Version 2.52.x</a></div><div class="d-flex flex-column justify-content-center"><svg class="icon icon-tabler icon-tabler-arrow-right" width="20" height="20" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12h14"/><path d="M13 18l6-6"/><path d="M13 6l6 6"/></svg></div></div></div></div></main></div></div></div><footer class="footer text-muted"><div class=container-lg><div class=row><div class="col-lg-8 text-center text-lg-start"><ul class=list-inline><li class=list-inline-item><a class=text-muted href=/></a></li></ul></div><div class="col-lg-8 text-center text-lg-end"><ul class=list-inline><li class=list-inline-item></li></ul></div></div></div></footer><script async src=/js/app.b0f012dbaf29743a79ede71e0264ee36932ab4a68ba3f42fe76e93dbda9c2a4d.js integrity="sha256-sPAS268pdDp57eceAmTuNpMqtKaLo/Qv526T29qcKk0="></script><script async src=/js/docsearch.055f75b915aa69e82b9c44a79c1cabc51bd6c41b21a474d8866f01f85f014c72.js integrity="sha256-BV91uRWqaegrnESnnByrxRvWxBshpHTYhm8B+F8BTHI="></script></body></html>