name: “Security checks”

on: [ push, pull_request ]

jobs:
  codeql:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Init CodeQL
        uses: github/codeql-action/init@v3
        with:
          languages: javascript
          
      - name: Autobuild
        uses: github/codeql-action/autobuild@v3
      - name: Analyze
        uses: github/codeql-action/analyze@v3
      
  php-static:
      runs-on: ubuntu-latest
      steps:
        - uses: actions/checkout@v4
        - name: Setup PHP
          uses: shivammathur/setup-php@v4
          with:
            php-version: ‘8.1’
        - name: Install deps
          run: composer install --no-progress --no-suggest
        - name: Run Psalm
          run: ./vendor/bin/psalm --show-info=false
        - name: Upload Psalm report (optional)
          uses: actions/upload-artifact@v4
          with:
            name: psalm-report
            path: psalm.xml
