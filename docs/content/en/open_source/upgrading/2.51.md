---
title: 'Upgrading to DefectDojo Version 2.51.x'
toc_hide: true
weight: -20250902
description: Helm chart changes.
---

## Helm Chart Changes

This release introduces several important changes to the Helm chart configuration:

### Breaking changes

#### Volume Management Improvements

- **Streamlined volume configuration**: The existing volume logic has been removed and replaced with more flexible `extraVolumes` and `extraVolumeMounts` options that provide deployment-agnostic volume management.

> The previous volume implementation prevented mounting projected volumes (such as secret mounts with renamed key names) and per-container volume mounts (like nginx emptyDir when readOnlyRootFs is enforced).
> The new approach resolves these limitations.

#### Moved values

The following Helm chart values have been modified in this release:

- `redis.transportEncryption.enabled` → `redis.tls.enabled` (aligned with upstream Helm chart)
- `redis.scheme` → `redis.sentinel.enabled` (controls deployment mode and aligns with upstream chart)
- `redis.redisServer` → `redisServer` (prevents potential schema conflicts with upstream chart)
- `redis.transportEncryption.params` → `redisParams` (prevents potential schema conflicts with upstream chart)
- `postgresql.postgresServer` → `postgresServer` (prevents potential schema conflicts with upstream chart)

### New features

#### Container and Environment Enhancements

- **Added extraInitContainers support**: Both Celery and Django deployments now support additional init containers through the `extraInitContainers` configuration option.
- **Enhanced probe configuration for Celery**: Added support for customizing liveness, readiness, and startup probes in both Celery beat and worker deployments.
- **Enhanced environment variable management**: All deployments now include `extraEnv` support for adding custom environment variables. For backwards compatibility, `.Values.extraEnv` can be used to inject common environment variables to all workloads.

### Other changes

- **Celery pod annotations**: Now we can add annotations to Celery beat/worker pods separately.
- **Flexible secret deployment**: Added the capability to deploy secrets as regular (non-hooked) resources to address compatibility issues encountered with CI/CD tools (such as ArgoCD).
- **Optional secret references**: Some secret references are now optional, allowing the chart to function even when certain secrets are not created.
- **Fixed secret mounting**: Resolved issues with optional secret mounts and references.
- **Improved code organization**: Minor Helm chart refactoring to enhance readability and maintainability.

---

There are other instructions for upgrading to 2.51.x. Check the [Release Notes](https://github.com/DefectDojo/django-DefectDojo/releases/tag/2.51.0) for the contents of the release.
